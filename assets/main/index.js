System.register("chunks:///_virtual/index.ts",["cc"],(function(r){"use strict";var n,t,e,o;return{setters:[function(r){n=r.cclegacy,t=r.Node,e=r.UITransform,o=r.Layers}],execute:function(){n._RF.push({},"00491gKwipOtrP/vB9jrI5q","index",void 0);r("creatUINode",(function(r){void 0===r&&(r="");var n=new t(r);n.addComponent(e);return n.layer=1<<o.nameToLayer("UI_2D"),n})),r("randombyLength",(function(r){return Array.from({length:r}).reduce((function(r,n){return r+Math.floor(10*Math.random())}),"")})),r("RandomNumer",(function(r,n){return Math.floor(r+(n-r)*Math.random())}));var a=/\((\d+)\)/,u=r("getStrNumber",(function(r){return parseInt(r.match(a)[1]||"0")}));r("sortspriteFrame",(function(r){return r.sort((function(r,n){return u(r.name)-u(n.name)}))}));n._RF.pop()}}}));

System.register("chunks:///_virtual/TurnLeftStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,i,a,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DRIECTION_ENUM},function(t){a=t.IdleTurnStateMachie},function(t){c=t.State}],execute:function(){e._RF.push({},"007d6jPZUNDPI/OrXcQLd38","TurnLeftStateMachine",void 0);var r="texture/player/turnleft";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(i.TOP,new c(e,r+"/top")),n.stateMachine.set(i.BOTTOM,new c(e,r+"/bottom")),n.stateMachine.set(i.LEFT,new c(e,r+"/left")),n.stateMachine.set(i.RIGHT,new c(e,r+"/right")),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./DataManager.ts","./SpikesMachine.ts"],(function(t){"use strict";var n,e,o,i,s,r,a,c,u,h,f,l,p,_,d,E,T,y;return{setters:[function(t){n=t.cclegacy,e=t._decorator,o=t.Component,i=t.Sprite,s=t.UITransform},function(t){r=t.randombyLength},function(t){a=t.inheritsLoose,c=t.defineProperty,u=t.assertThisInitialized,h=t.createClass,f=t.asyncToGenerator},function(t){l=t.EVENTMANAGER,p=t.ENTINY_STATE_ENUM,_=t.PARAMS_NAME_ENUM,d=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM},function(t){E=t.default},function(t){T=t.default},function(t){y=t.SpikesMachine}],execute:function(){var m;n._RF.push({},"032cbHCikpFDJS41nA9gA6f","SpikesManager",void 0);var M=e.ccclass,S=(e.property,t("TILE_HEIGHT",55)),A=t("TILE_WIDTH",55);t("ANIMATION_SPEED",1/8),t("SpikesManager",M("SpikesManager")(m=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return n=t.call.apply(t,[this].concat(o))||this,c(u(n),"id",r(12)),c(u(n),"x",void 0),c(u(n),"y",void 0),c(u(n),"fsm",void 0),c(u(n),"_count",0),c(u(n),"_totalcount",void 0),c(u(n),"type",void 0),c(u(n),"transfrom",void 0),n}a(n,t);var e=n.prototype;return e.init=function(){var t=f(regeneratorRuntime.mark((function t(n){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.node.addComponent(i).sizeMode=i.SizeMode.CUSTOM,this.transfrom=this.getComponent(s),this.transfrom.setContentSize(4*A,4*S),this.x=n.x,this.y=n.y,this.fsm=this.addComponent(y),t.next=9,this.fsm.init();case 9:e=n.type,this.count=n.count,this.totalcount=d[e],E.Instance.on(l.PLAYERMOVE_END,this.onloop,this);case 13:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),e.update=function(){this.node.setPosition(this.x*A,-this.y*S)},e.onDestroy=function(){E.Instance.off(l.PLAYERMOVE_END,this.onloop)},e.onloop=function(){null!=this.fsm&&(this.count===this.totalcount?this.count=0:this.count++,this.attack())},e.attack=function(){if(null!==T.Instance.player){var t=T.Instance.player,n=t.x,e=t.y;this.x===n&&this.y===e&&this.totalcount===this.count&&E.Instance.emit(l.ATTACK_PLAYER,p.DEATH)}},e.ResetZero=function(){this.count=0},h(n,[{key:"count",get:function(){return this._count},set:function(t){null!==this&&(this._count=t,this.fsm.setParams(_.SPIKES_CUR_COUNT,t))}},{key:"totalcount",get:function(){return this._totalcount},set:function(t){null!==this&&(this._totalcount=t,this.fsm.setParams(_.SPIKES_TOTAL_COUNT,t))}}]),n}(o))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EnityManger.ts","./StateMachine.ts","./SmokeIdleStateMachines.ts","./SmokeDeathStateMachines.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,h,u,m,f,p;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.ENTINY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){o=t.EnityManger},function(t){h=t.GetParamsTrigger,u=t.GetParamsNUmber,m=t.StateMachine},function(t){f=t.default},function(t){p=t.default}],execute:function(){var E;e._RF.push({},"0c5eb0GWWxI4q1JAa87Ikuz","SmokeMachine",void 0);var M=n.ccclass;t("SmokeMachine",M("SmokeMachine")(E=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initAnimationEvent=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["idle"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(o).state=r.DEATH)}))},n.initParams=function(){this.param.set(c.IDLE,h()),this.param.set(c.DEATH,h()),this.param.set(c.DRIECTION,u())},n.initStateMachine=function(){this.stateMachine.set(c.IDLE,new f(this)),this.stateMachine.set(c.DEATH,new p(this))},n.run=function(){switch(this.currentState){case this.stateMachine.get(c.DEATH):case this.stateMachine.get(c.IDLE):this.param.get(c.DEATH).value?this.currentState=this.stateMachine.get(c.DEATH):this.param.get(c.IDLE).value?this.currentState=this.stateMachine.get(c.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(c.IDLE)}},e}(m))||E);e._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./DataManager.ts","./EnemyManager.ts","./WoodenSkeletonSubMachine.ts"],(function(t){"use strict";var n,e,o,a,s,i,r,c,u,h;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){o=t.inheritsLoose,a=t.asyncToGenerator},function(t){s=t.EVENTMANAGER,i=t.ENTINY_STATE_ENUM},function(t){r=t.default},function(t){c=t.default},function(t){u=t.EnemyManager},function(t){h=t.WoodenSkeletonSubMachine}],execute:function(){var l;n._RF.push({},"0cba5GIPCRGkaa22tDT4XG0","WoodenSkeletonManager",void 0);var f=e.ccclass;e.property,t("WoodenSkeletonManager",f("WoodenSkeletonManager")(l=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.init=function(){var n=a(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(h),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),r.Instance.on(s.PLAYERMOVE_END,this.onAttack,this);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.update=function(){t.prototype.update.call(this)},e.onDestroy=function(){t.prototype.onDestroy.call(this),r.Instance.off(s.PLAYERMOVE_END,this.onAttack)},e.onAttack=function(){if(this.state!==i.DEATH){var t=c.Instance.player,n=t.x,e=t.y,o=t.state;(this.x===n&&Math.abs(this.y-e)<=1||this.y===e&&Math.abs(this.x-n)<=1)&&o!==i.AIRDEATH&&o!==i.DEATH?(r.Instance.emit(s.ATTACK_PLAYER,i.DEATH),console.log(this.x===n&&Math.abs(this.y-e)<=1),console.log(this.y===e&&Math.abs(this.x-n)<=1),console.log(o),this.state=i.ATTACK):this.state=i.IDLE}},n}(u))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/IdleTurnStateMachie.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,r,c,i,a;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.inheritsLoose},function(t){c=t.PARAMS_NAME_ENUM,i=t.DIRECTION_ORDER_ENUM},function(t){a=t.default}],execute:function(){var u;e._RF.push({},"0d78czaVUFBkpPfXyHtpwOx","IdleTurnStateMachie",void 0);var s=n.ccclass;n.property,t("IdleTurnStateMachie",s("IdleTurnStateMachie")(u=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.run=function(){var t=this.fsm.getParams(c.DRIECTION);this.currentState=this.stateMachine.get(i[t])},e}(a))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockfrontStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,c,i,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DRIECTION_ENUM},function(t){i=t.IdleTurnStateMachie},function(t){a=t.State}],execute:function(){e._RF.push({},"0e63b60fGxDbbcvz2yU//dD","BlockfrontStateMachine",void 0);var s="texture/player/blockfront";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(c.TOP,new a(e,s+"/top")),n.stateMachine.set(c.BOTTOM,new a(e,s+"/bottom")),n.stateMachine.set(c.LEFT,new a(e,s+"/left")),n.stateMachine.set(c.RIGHT,new a(e,s+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(o){"use strict";var i,e,t,n,u,r,a,s;return{setters:[function(o){i=o.cclegacy,e=o._decorator,t=o.AudioSource,n=o.assert,u=o.Component},function(o){r=o.inheritsLoose,a=o.defineProperty,s=o.assertThisInitialized}],execute:function(){var c;i._RF.push({},"15427zNcsJNt4hB0mDvbGzw","AudioManager",void 0);var d=e.ccclass;o("AudioManager",d("AudioManager")(c=function(o){function i(){for(var i,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i=o.call.apply(o,[this].concat(t))||this,a(s(i),"audioSource",void 0),a(s(i),"AudioResolve",void 0),i}r(i,o);var e=i.prototype;return e.init=function(){this.audioSource=this.addComponent(t)},e.playMusic=function(o,i){var e=this;return void 0===o&&(o=!1),void 0===i&&(i=null),this.audioSource.clip=i,n(this.audioSource,"AudioManager not inited!"),this.audioSource.loop=o,this.audioSource.playing||this.audioSource.play(),new Promise((function(o){e.AudioResolve=o}))},e.playSound=function(o,i){void 0===o&&(o=null),void 0===i&&(i=1);var e=this.audioSource;n(e,"AudioManager not inited!"),e.playOneShot(o,i)},e.stop=function(){this.audioSource.stop()},e.destory=function(){this.node.removeFromParent()},i}(u))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/level14.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,O,s,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,O=t.DRIECTION_ENUM,s=t.ENTINY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"154bfzcfcZOsppgBDOOO5CX","level14",void 0);var y=[[{src:22,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:20,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_RIGHT},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_RIGHT},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:27,type:L.WALL_ROW},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_CENTER},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:19,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null}]],r={x:1,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.PLAYER},p=[{x:3,y:4,direction:O.TOP,state:s.IDLE,type:c.WOODENSKELETON},{x:8,y:3,direction:O.LEFT,state:s.IDLE,type:c.WOODENSKELETON}],R=[{x:3,y:2,type:c.SPIKES_TWO,count:0}],F=[{x:1,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:5,y:2,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:5,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:7,y:3,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:7,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:2,state:s.IDLE,type:c.BURST,direction:O.TOP}],_={x:10,y:1,direction:O.LEFT,state:s.IDLE,type:c.DOOR};t("default",{mapInfo:y,player:r,enemies:p,spikes:R,bursts:F,door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesFourSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./State.ts","./SpikesSubMachine.ts"],(function(e){"use strict";var t,n,s,i,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.State},function(e){u=e.default}],execute:function(){t._RF.push({},"18a936eE0ZEpoJLNCLwrJk6","SpikesFourSubMachine",void 0);var a="texture/spikes/spikesfour";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachine.set(s.ZERO,new i(t,a+"/zero")),n.stateMachine.set(s.ONE,new i(t,a+"/one")),n.stateMachine.set(s.TWO,new i(t,a+"/two")),n.stateMachine.set(s.THREE,new i(t,a+"/three")),n.stateMachine.set(s.FOUR,new i(t,a+"/four")),n.stateMachine.set(s.FIVE,new i(t,a+"/five")),n}return n(t,e),t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/TileManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(e){"use strict";var t,i,n,s,r,o,a,l;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Sprite,s=e.UITransform,r=e.Component},function(e){o=e.inheritsLoose,a=e.defineProperty,l=e.assertThisInitialized}],execute:function(){var c;t._RF.push({},"1d150B4tqBIt5/l0H/lqaKb","TileManager",void 0);var u=i.ccclass;e("TlieManager",u("TlieManager")(c=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,a(l(t),"type",void 0),a(l(t),"moveable",void 0),a(l(t),"turnable",void 0),t}return o(t,e),t.prototype.init=function(e,t,i,r){this.type=e,this.type.includes("WALL")?(this.moveable=!1,this.turnable=!1):this.type.includes("CLIFF")?(this.moveable=!1,this.turnable=!0):this.type.includes("FLOOR")&&(this.moveable=!0,this.turnable=!0),this.addComponent(n).spriteFrame=t,this.addComponent(s).setContentSize(55,55),this.node.setPosition(55*i,55*-r)},t}(r))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/level10.ts",["cc","./index3.ts"],(function(L){"use strict";var t,e,O,s,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,O=L.DRIECTION_ENUM,s=L.ENTINY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"21c57VGNMBEjIOiAXggVtFQ","level10",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],y={x:1,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},p=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.WOODENSKELETON},{x:2,y:4,direction:O.BOTTOM,state:s.IDLE,type:c.IRONSKELETON},{x:5,y:5,direction:O.LEFT,state:s.IDLE,type:c.WOODENSKELETON}],R=[{x:4,y:3,type:c.SPIKES_THREE,count:0}],E=[{x:3,y:4,state:s.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:5,state:s.IDLE,type:c.BURST,direction:O.TOP}],F={x:6,y:1,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:R,bursts:E,door:F});t._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,c,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){c=t.IdleTurnStateMachie},function(t){s=t.State}],execute:function(){e._RF.push({},"23217C+ISBJ1bAVGU4zPpm8","AttackSubStateMachines",void 0);var i="texture/woodenskeleton/attack";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new s(e,i+"/top")),n.stateMachine.set(a.BOTTOM,new s(e,i+"/bottom")),n.stateMachine.set(a.LEFT,new s(e,i+"/left")),n.stateMachine.set(a.RIGHT,new s(e,i+"/right")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/DoorIdleSubStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,i,s,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DRIECTION_ENUM},function(t){s=t.IdleTurnStateMachie},function(t){a=t.State}],execute:function(){e._RF.push({},"265b9ze/OdHBbo/+dxkHr1M","DoorIdleSubStateMachines",void 0);var c="texture/door/idle";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(i.TOP,new a(e,c+"/top")),n.stateMachine.set(i.BOTTOM,new a(e,c+"/top")),n.stateMachine.set(i.LEFT,new a(e,c+"/left")),n.stateMachine.set(i.RIGHT,new a(e,c+"/left")),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeDeathStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){s=t.IdleTurnStateMachie},function(t){c=t.State}],execute:function(){e._RF.push({},"2bcc6/zVyVGI4fxuWsYUuNP","SmokeDeathStateMachines",void 0);var i="texture/door/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new c(e,""+i)),n.stateMachine.set(a.BOTTOM,new c(e,""+i)),n.stateMachine.set(a.LEFT,new c(e,""+i)),n.stateMachine.set(a.RIGHT,new c(e,""+i)),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EnityManger.ts","./SmokeMachine.ts"],(function(e){"use strict";var t,n,r,i,o,a;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){r=e.inheritsLoose,i=e.asyncToGenerator},function(e){o=e.EnityManger},function(e){a=e.SmokeMachine}],execute:function(){var s;t._RF.push({},"2e225WTbEBD5rG6RTAlJTC6","SmokeManager",void 0);var c=n.ccclass;e("SmokeManager",c("SmokeManager")(s=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.init=function(){var t=i(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.fsm=this.addComponent(a),t.next=3,this.fsm.init();case 3:e.prototype.init.call(this,n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(o))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIController.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./DataManager.ts"],(function(t){"use strict";var e,n,r,o,i,l,a,c,u,s,p;return{setters:[function(t){e=t.cclegacy,n=t._decorator,r=t.AudioClip,o=t.Component},function(t){i=t.applyDecoratedDescriptor,l=t.inheritsLoose,a=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){u=t.EVENTMANAGER},function(t){s=t.default},function(t){p=t.default}],execute:function(){var f,d,y,h,E;e._RF.push({},"38165El3exE2LKOlo8MtPmU","UIController",void 0);var g=n.ccclass,v=n.property;t("UIController",(f=g("UIController"),d=v(r),f((E=i((h=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(c(e),"soundclip",E,c(e)),e}return l(e,t),e.prototype.handler=function(t,e){null!==p.Instance.player&&s.Instance.emit(u.PLAYER_CONTROLLER,e,this.soundclip)},e}(o)).prototype,"soundclip",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=h))||y));e._RF.pop()}}}));

System.register("chunks:///_virtual/DoorDeathSubStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,s,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){s=t.IdleTurnStateMachie},function(t){c=t.State}],execute:function(){e._RF.push({},"3d0dcEsVLBPKbTWVt7mzdQy","DoorDeathSubStateMachines",void 0);var i="texture/door/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new c(e,""+i)),n.stateMachine.set(a.BOTTOM,new c(e,""+i)),n.stateMachine.set(a.LEFT,new c(e,""+i)),n.stateMachine.set(a.RIGHT,new c(e,""+i)),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockturnrightStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,i,c,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DRIECTION_ENUM},function(t){c=t.IdleTurnStateMachie},function(t){a=t.State}],execute:function(){e._RF.push({},"471baDN00lHwoHfqT1qcPff","BlockturnrightStateMachine",void 0);var r="texture/player/blockturnright";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(i.TOP,new a(e,r+"/top")),n.stateMachine.set(i.BOTTOM,new a(e,r+"/bottom")),n.stateMachine.set(i.LEFT,new a(e,r+"/left")),n.stateMachine.set(i.RIGHT,new a(e,r+"/right")),n}return n(e,t),e}(c));e._RF.pop()}}}));

System.register("chunks:///_virtual/level3.ts",["cc","./index3.ts"],(function(l){"use strict";var t,e,L,c,y;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,L=l.DRIECTION_ENUM,c=l.ENTINY_STATE_ENUM,y=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"4d6a8d+shdN9pfKRWRStK3J","level3",void 0);var s=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:22,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:0,y:8,direction:L.RIGHT,state:c.IDLE,type:y.PLAYER},r=[{x:6,y:7,direction:L.TOP,state:c.IDLE,type:y.WOODENSKELETON}],O=[{x:4,y:8,type:y.SPIKES_ONE,count:0},{x:4,y:9,type:y.SPIKES_ONE,count:0},{x:6,y:3,type:y.SPIKES_ONE,count:0},{x:7,y:3,type:y.SPIKES_ONE,count:0},{x:6,y:5,type:y.SPIKES_ONE,count:0},{x:7,y:5,type:y.SPIKES_ONE,count:0}],n={x:6,y:0,direction:L.BOTTOM,state:c.IDLE,type:y.DOOR};l("default",{mapInfo:s,player:p,enemies:r,spikes:O,bursts:[],door:n});t._RF.pop()}}}));

System.register("chunks:///_virtual/level17.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,y,O,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,y=t.DRIECTION_ENUM,O=t.ENTINY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"507b8SbWVxBDKZP2lCRX0uK","level17",void 0);var s=[[{src:20,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],p={x:7,y:7,direction:y.LEFT,state:O.IDLE,type:c.PLAYER},r=[{x:2,y:1,direction:y.BOTTOM,state:O.IDLE,type:c.WOODENSKELETON},{x:2,y:4,direction:y.RIGHT,state:O.IDLE,type:c.WOODENSKELETON}],R=[{x:1,y:3,type:c.SPIKES_TWO,count:0},{x:3,y:3,type:c.SPIKES_TWO,count:0},{x:4,y:1,type:c.SPIKES_TWO,count:0},{x:4,y:4,type:c.SPIKES_TWO,count:0},{x:4,y:6,type:c.SPIKES_TWO,count:0},{x:5,y:3,type:c.SPIKES_TWO,count:0},{x:6,y:2,type:c.SPIKES_TWO,count:0},{x:6,y:6,type:c.SPIKES_TWO,count:0}],E=[{x:1,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:2,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:3,y:6,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:2,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:4,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:4,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:5,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP},{x:6,y:5,state:O.IDLE,type:c.BURST,direction:y.TOP}],F={x:0,y:1,direction:y.LEFT,state:O.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:p,enemies:r,spikes:R,bursts:E,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./level14.ts","./level10.ts","./level3.ts","./level17.ts","./level1.ts","./level2.ts","./level4.ts","./level5.ts","./level6.ts","./level7.ts","./level8.ts","./level9.ts","./level11.ts","./level12.ts","./level13.ts","./level15.ts","./level16.ts","./level18.ts","./level19.ts","./level20.ts","./level21.ts"],(function(e){"use strict";var l,t,u,n,f,v,c,i,s,a,o,d,r,h,p,x,y,_,g,F,R,S;return{setters:[function(e){l=e.cclegacy},function(e){t=e.default},function(e){u=e.default},function(e){n=e.default},function(e){f=e.default},function(e){v=e.default},function(e){c=e.default},function(e){i=e.default},function(e){s=e.default},function(e){a=e.default},function(e){o=e.default},function(e){d=e.default},function(e){r=e.default},function(e){h=e.default},function(e){p=e.default},function(e){x=e.default},function(e){y=e.default},function(e){_=e.default},function(e){g=e.default},function(e){F=e.default},function(e){R=e.default},function(e){S=e.default}],execute:function(){l._RF.push({},"51526hOc/5KJbaNjuST5cDy","index",void 0);e("default",{level1:v,level2:c,level3:n,level4:i,level5:s,level6:a,level7:o,level8:d,level9:r,level10:u,level11:h,level12:p,level13:x,level14:t,level15:y,level16:_,level17:f,level18:g,level19:F,level20:R,level21:S});l._RF.pop()}}}));

System.register("chunks:///_virtual/ShakeManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts"],(function(s){"use strict";var t,i,o,e,n,a,h,r,c,d;return{setters:[function(s){t=s.cclegacy,i=s._decorator,o=s.game,e=s.Component},function(s){n=s.inheritsLoose,a=s.defineProperty,h=s.assertThisInitialized},function(s){r=s.EVENTMANAGER,c=s.SHAKE_DIRECTION_ENMU},function(s){d=s.default}],execute:function(){var l;t._RF.push({},"51f4cvepehCf75bTlf/r/fi","ShakeManager",void 0);var u=i.ccclass;s("ShakeManager",u("ShakeManager")(l=function(s){function t(){for(var t,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return t=s.call.apply(s,[this].concat(o))||this,a(h(t),"isShaking",!1),a(h(t),"oldTime",0),a(h(t),"oldPos",{x:0,y:0}),a(h(t),"shakeType",void 0),t}n(t,s);var i=t.prototype;return i.onLoad=function(){d.Instance.on(r.SHAKE_SHOW,this.onshake,this)},i.onDstroy=function(){d.Instance.off(r.SHAKE_SHOW,this.onshake)},i.stop=function(){this.isShaking=!1},i.update=function(){if(this.isShaking){var s=(o.totalTime-this.oldTime)/1e3,t=1.6*Math.sin(12*Math.PI*s);switch(this.shakeType){case c.TOP:this.node.setPosition(this.oldPos.x,this.oldPos.y-t);break;case c.BOTTOM:this.node.setPosition(this.oldPos.x,this.oldPos.y+t);break;case c.LEFT:this.node.setPosition(this.oldPos.x-t,this.oldPos.y);break;case c.RIGHT:this.node.setPosition(this.oldPos.x+t,this.oldPos.y)}s>.2&&(this.isShaking=!1,this.node.setPosition(this.oldPos.x,this.oldPos.y))}},i.onshake=function(s){this.isShaking||(this.oldTime=o.totalTime,this.oldPos.x=this.node.position.x,this.oldPos.y=this.node.position.y,this.isShaking=!0,this.shakeType=s)},t}(e))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/DoorManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./EnityManger.ts","./DataManager.ts","./DoorSubMachine.ts"],(function(t){"use strict";var n,e,r,o,a,s,i,c,u,f;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){r=t.inheritsLoose,o=t.asyncToGenerator},function(t){a=t.EVENTMANAGER,s=t.ENTINY_STATE_ENUM},function(t){i=t.default},function(t){c=t.EnityManger},function(t){u=t.default},function(t){f=t.DoorSubMachine}],execute:function(){var p;n._RF.push({},"52c73qWQ25FjY17wqP77wgL","DoorManager",void 0);var h=e.ccclass;e.property,t("DoorManager",h("DoorManager")(p=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.init=function(){var n=o(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(f),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.state=e.state,i.Instance.on(a.DOOR_OPEN,this.onOpen,this);case 6:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){i.Instance.off(a.DOOR_OPEN,this.onOpen)},e.update=function(){t.prototype.update.call(this)},e.onOpen=function(){u.Instance.enemes&&u.Instance.enemes.every((function(t){return"DEATH"===t.state}))&&this.state!==s.DEATH&&(this.state=s.DEATH)},n}(c))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/level4.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DRIECTION_ENUM,s=L.ENTINY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"56691/RcdhGC74DdnOBijxg","level4",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],p={x:2,y:7,direction:O.TOP,state:s.IDLE,type:c.PLAYER},y=[{x:1,y:3,direction:O.BOTTOM,state:s.IDLE,type:c.IRONSKELETON}],T={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:p,enemies:y,spikes:[],bursts:[],door:T});e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./StateMachine.ts","./SpikesFourSubMachine.ts","./SpikesOneSubMachine.ts","./SpikesThreeSubMachine.ts","./SpikesTwoSubMachine.ts","./SpikesManager.ts"],(function(t){"use strict";var e,n,i,s,a,r,c,S,h,o,u,E,_,p,P;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){s=t.inheritsLoose,a=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM,c=t.SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM,S=t.ENTITY_TYPE_ENUM},function(t){h=t.GetParamsNUmber,o=t.StateMachine},function(t){u=t.default},function(t){E=t.default},function(t){_=t.default},function(t){p=t.default},function(t){P=t.SpikesManager}],execute:function(){var M;e._RF.push({},"57f0bIQeeFALZbRNNJDEmzJ","SpikesMachine",void 0);var f=n.ccclass;n.property,t("SpikesMachine",f("SpikesMachine")(M=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.init=function(){var t=a(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initAnimationEvent(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initAnimationEvent=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name,n=t.param.get(r.SPIKES_TOTAL_COUNT).value;(e.includes("spikesone/two")&&n===c.SPIKES_ONE||e.includes("spikesone/three")&&n===c.SPIKES_TWO||e.includes("spikesone/four")&&n===c.SPIKES_THREE||e.includes("spikesone/five")&&n===c.SPIKES_FOUR)&&t.node.getComponent(P).ResetZero()}))},n.initParams=function(){this.param.set(r.SPIKES_CUR_COUNT,h()),this.param.set(r.SPIKES_TOTAL_COUNT,h())},n.initStateMachine=function(){this.stateMachine.set(S.SPIKES_ONE,new E(this)),this.stateMachine.set(S.SPIKES_TWO,new p(this)),this.stateMachine.set(S.SPIKES_THREE,new _(this)),this.stateMachine.set(S.SPIKES_FOUR,new u(this))},n.run=function(){var t=this.param.get(r.SPIKES_TOTAL_COUNT).value;switch(this.currentState){case this.stateMachine.get(S.SPIKES_ONE):case this.stateMachine.get(S.SPIKES_TWO):case this.stateMachine.get(S.SPIKES_THREE):case this.stateMachine.get(S.SPIKES_FOUR):t===c.SPIKES_ONE?this.currentState=this.stateMachine.get(S.SPIKES_ONE):t===c.SPIKES_TWO?this.currentState=this.stateMachine.get(S.SPIKES_TWO):t===c.SPIKES_THREE?this.currentState=this.stateMachine.get(S.SPIKES_THREE):t===c.SPIKES_FOUR?this.currentState=this.stateMachine.get(S.SPIKES_FOUR):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(S.SPIKES_ONE)}},e}(o))||M);e._RF.pop()}}}));

System.register("chunks:///_virtual/level20.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,y,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DRIECTION_ENUM,y=t.ENTINY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"5b194LMh/1JQZiRhlPGgvQY","level20",void 0);var r=[[{src:null,type:null},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:15,type:L.WALL_RIGHT_TOP},{src:25,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:22,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}]],p={x:0,y:4,direction:s.RIGHT,state:y.IDLE,type:c.PLAYER},O=[{x:9,y:1,direction:s.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:9,y:3,direction:s.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:9,y:4,direction:s.LEFT,state:y.IDLE,type:c.WOODENSKELETON}],l=[{x:1,y:2,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:3,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:3,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:4,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:7,y:4,state:y.IDLE,type:c.BURST,direction:s.TOP}],R={x:9,y:0,direction:s.BOTTOM,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:r,player:p,enemies:O,spikes:[],bursts:l,door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/IronskeletonManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./EnemyManager.ts","./IronskeletonManagerSubMachine.ts"],(function(n){"use strict";var e,t,r,o,a,s;return{setters:[function(n){e=n.cclegacy,t=n._decorator},function(n){r=n.inheritsLoose,o=n.asyncToGenerator},function(n){a=n.EnemyManager},function(n){s=n.IronskeletonManagerSubMachine}],execute:function(){var i;e._RF.push({},"5c852vVVTpKRalIIp8YlLCO","IronskeletonManager",void 0);var c=t.ccclass;t.property,n("IronskeletonManager",c("IronskeletonManager")(i=function(n){function e(){return n.apply(this,arguments)||this}return r(e,n),e.prototype.init=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(s),e.next=3,this.fsm.init();case 3:n.prototype.init.call(this,t);case 4:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesOneSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./State.ts","./SpikesSubMachine.ts"],(function(e){"use strict";var t,n,s,i,u;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.State},function(e){u=e.default}],execute:function(){t._RF.push({},"6d538b+Yq1OZpeSD7TMOJzW","SpikesOneSubMachine",void 0);var c="texture/spikes/spikesone";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachine.set(s.ZERO,new i(t,c+"/zero")),n.stateMachine.set(s.ONE,new i(t,c+"/one")),n.stateMachine.set(s.TWO,new i(t,c+"/two")),n}return n(t,e),t}(u));t._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./EnityManger.ts","./DataManager.ts"],(function(t){"use strict";var n,e,i,s,r,a,o,c,h,E;return{setters:[function(t){n=t.cclegacy,e=t._decorator},function(t){i=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.EVENTMANAGER,a=t.ENTINY_STATE_ENUM,o=t.DRIECTION_ENUM},function(t){c=t.default},function(t){h=t.EnityManger},function(t){E=t.default}],execute:function(){n._RF.push({},"7318dpa/M5P3qX/oKJCXRhe","EnemyManager",void 0);e.ccclass,e.property,t("TILE_HEIGHT",55),t("TILE_WIDTH",55),t("ANIMATION_SPEED",1/8),t("EnemyManager",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.init=function(){var n=s(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.prototype.init.call(this,e),c.Instance.on(r.PLAYERMOVE_END,this.changeDirection,this),c.Instance.on(r.PLAYER_BORN,this.changeDirection,this),c.Instance.on(r.ATTACK_ENEMY,this.onDead,this),this.changeDirection(!0);case 5:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),c.Instance.off(r.PLAYERMOVE_END,this.changeDirection),c.Instance.off(r.PLAYER_BORN,this.changeDirection),c.Instance.off(r.ATTACK_ENEMY,this.onDead),this.destroy()},e.changeDirection=function(t){if(void 0===t&&(t=!1),E.Instance.player&&this.state!==a.DEATH){var n=E.Instance.player,e=n.x,i=n.y,s=Math.abs(this.x-e),r=Math.abs(this.y-i);(s!==r||t)&&(e>=this.x&&i<=this.y?this.direction=r>s?o.TOP:o.RIGHT:e<=this.x&&i<=this.y?this.direction=r>s?o.TOP:o.LEFT:e>=this.x&&i>=this.y?this.direction=r>s?o.BOTTOM:o.RIGHT:e<=this.x&&i>=this.y&&(this.direction=r>s?o.BOTTOM:o.LEFT))}},e.onDead=function(t){this.state!==a.DEATH&&t===this.id&&(this.state=a.DEATH)},n}(h));n._RF.pop()}}}));

System.register("chunks:///_virtual/IdleLeftStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(e){"use strict";var t,n,a,o,i,c;return{setters:[function(e){t=e.cclegacy,n=e.AnimationClip},function(e){a=e.inheritsLoose},function(e){o=e.DRIECTION_ENUM},function(e){i=e.IdleTurnStateMachie},function(e){c=e.State}],execute:function(){t._RF.push({},"75067V6Ub9JQ4eao9G0+f4F","IdleLeftStateMachine",void 0);var r="texture/player/idle";e("default",function(e){function t(t){var a;return(a=e.call(this,t)||this).stateMachine.set(o.TOP,new c(t,r+"/top",n.WrapMode.Loop)),a.stateMachine.set(o.BOTTOM,new c(t,r+"/bottom",n.WrapMode.Loop)),a.stateMachine.set(o.LEFT,new c(t,r+"/left",n.WrapMode.Loop)),a.stateMachine.set(o.RIGHT,new c(t,r+"/right",n.WrapMode.Loop)),a}return a(t,e),t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/BurstManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./EnityManger.ts","./DataManager.ts","./BurstMachine.ts"],(function(t){"use strict";var n,e,s,r,i,a,o,u,c,h,f,p,E,l;return{setters:[function(t){n=t.cclegacy,e=t._decorator,s=t.UITransform},function(t){r=t.inheritsLoose,i=t.asyncToGenerator},function(t){a=t.EVENTMANAGER,o=t.ENTINY_STATE_ENUM,u=t.SHAKE_DIRECTION_ENMU},function(t){c=t.default},function(t){h=t.TILE_WIDTH,f=t.TILE_HEIGHT,p=t.EnityManger},function(t){E=t.default},function(t){l=t.BurstMachine}],execute:function(){var T;n._RF.push({},"750e5R14QdIl5dzpbQjYWQv","BurstManager",void 0);var y=e.ccclass;e.property,t("BurstManager",y("BurstManager")(T=function(t){function n(){return t.apply(this,arguments)||this}r(n,t);var e=n.prototype;return e.init=function(){var n=i(regeneratorRuntime.mark((function n(e){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.fsm=this.addComponent(l),n.next=3,this.fsm.init();case 3:t.prototype.init.call(this,e),this.transfrom=this.getComponent(s),this.transfrom.setContentSize(h,f),c.Instance.on(a.PLAYERMOVE_END,this.onBurst,this);case 7:case"end":return n.stop()}}),n,this)})));return function(t){return n.apply(this,arguments)}}(),e.onDestroy=function(){t.prototype.onDestroy.call(this),c.Instance.off(a.PLAYERMOVE_END,this.onBurst)},e.update=function(){this.node.setPosition(this.x*h,-this.y*f)},e.onBurst=function(){if(null!==E.Instance.player){var t=E.Instance.player,n=t.x,e=t.y;this.x===n&&this.y===e&&this.state===o.IDLE?this.state=o.ATTACK:this.state===o.ATTACK&&(this.state=o.DEATH,c.Instance.emit(a.SHAKE_SHOW,u.BOTTOM),this.x===n&&this.y===e&&c.Instance.emit(a.ATTACK_PLAYER,o.AIRDEATH))}},n}(p))||T);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockturnleftStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,c,i,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DRIECTION_ENUM},function(t){i=t.IdleTurnStateMachie},function(t){a=t.State}],execute:function(){e._RF.push({},"7611bvbz7NMHq5XoKxq3OTx","BlockturnleftStateMachine",void 0);var s="texture/player/blockturnleft";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(c.TOP,new a(e,s+"/top")),n.stateMachine.set(c.BOTTOM,new a(e,s+"/bottom")),n.stateMachine.set(c.LEFT,new a(e,s+"/left")),n.stateMachine.set(c.RIGHT,new a(e,s+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts"],(function(r){"use strict";var e,n,t,o,i,a,c,s,u,l,p;return{setters:[function(r){e=r.cclegacy,n=r._decorator,t=r.ProgressBar,o=r.resources,i=r.director,a=r.Component},function(r){c=r.applyDecoratedDescriptor,s=r.inheritsLoose,u=r.initializerDefineProperty,l=r.assertThisInitialized},function(r){p=r.SCENE_ENUM}],execute:function(){var g,d,f,y,b;e._RF.push({},"76b82Zsz2RN05eJtRTRxW5r","LoadingManager",void 0);var h=n.ccclass,v=n.property;r("LoadingManager",(g=h("LoadingManager"),d=v(t),g((b=c((y=function(r){function e(){for(var e,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return e=r.call.apply(r,[this].concat(t))||this,u(l(e),"bar",b,l(e)),e}return s(e,r),e.prototype.onLoad=function(){var r=this;o.preloadDir("/",(function(e,n){r.bar.progress=e/n}),(function(){i.loadScene(p.strat)}))},e}(a)).prototype,"bar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));e._RF.pop()}}}));

System.register("chunks:///_virtual/level6.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,r;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DRIECTION_ENUM,s=L.ENTINY_STATE_ENUM,r=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"7b509GovLZCMLuXEHH0KrSh","level6",void 0);var c=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_COLUMN},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER},{src:null,type:null},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:23,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],y={x:0,y:3,direction:O.RIGHT,state:s.IDLE,type:r.PLAYER},p=[{x:5,y:2,direction:O.LEFT,state:s.IDLE,type:r.WOODENSKELETON},{x:5,y:4,direction:O.LEFT,state:s.IDLE,type:r.WOODENSKELETON}],R={x:8,y:3,direction:O.LEFT,state:s.IDLE,type:r.DOOR};L("default",{mapInfo:c,player:y,enemies:p,spikes:[],bursts:[],door:R});e._RF.pop()}}}));

System.register("chunks:///_virtual/DeathSubStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,s,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){s=t.IdleTurnStateMachie},function(t){i=t.State}],execute:function(){e._RF.push({},"7deffjZEDhFD498ZOFjSHSU","DeathSubStateMachines",void 0);var c="texture/woodenskeleton/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new i(e,c+"/top")),n.stateMachine.set(a.BOTTOM,new i(e,c+"/bottom")),n.stateMachine.set(a.LEFT,new i(e,c+"/left")),n.stateMachine.set(a.RIGHT,new i(e,c+"/right")),n}return n(e,t),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/MusicManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts","./AudioManager.ts"],(function(t){"use strict";var o,n,i,e,r,u,s,a,d,c;return{setters:[function(t){o=t.cclegacy,n=t.game,i=t.RenderRoot2D},function(t){e=t.creatUINode},function(t){r=t.inheritsLoose,u=t.createClass,s=t.defineProperty,a=t.assertThisInitialized},function(t){d=t.default},function(t){c=t.AudioManager}],execute:function(){o._RF.push({},"808a4J5QLVFl6HHLF6J1RI6","MusicManager",void 0);t("default",function(t){function o(){for(var o,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return o=t.call.apply(t,[this].concat(i))||this,s(a(o),"_audio",null),s(a(o),"root",null),o}r(o,t);var d=o.prototype;return d.play=function(t,o){return this.audio.playMusic(t,o)},d.sound=function(t,o){return this.audio.playSound(t,o)},d.stop=function(){return this.audio.stop()},d.destory=function(){return this.audio.stop(),n.removePersistRootNode(this.root),this.audio.destory()},u(o,[{key:"audio",get:function(){if(null!==this._audio)return this._audio;this.root=e(),this.root.addComponent(i);var t=e();return t.setParent(this.root),this._audio=t.addComponent(c),this._audio.init(),n.addPersistRootNode(this.root),this._audio}}],[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),o}(d));o._RF.pop()}}}));

System.register("chunks:///_virtual/level9.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,y,c,O;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,y=t.DRIECTION_ENUM,c=t.ENTINY_STATE_ENUM,O=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"80cc11xeBhBpLrAi6mpMUUD","level9",void 0);var s=[[{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],r={x:2,y:11,direction:y.TOP,state:c.IDLE,type:O.PLAYER},p=[{x:1,y:1,direction:y.BOTTOM,state:c.IDLE,type:O.WOODENSKELETON},{x:2,y:7,direction:y.BOTTOM,state:c.IDLE,type:O.WOODENSKELETON}],T=[{x:1,y:3,type:O.SPIKES_THREE,count:0},{x:3,y:6,type:O.SPIKES_ONE,count:0},{x:2,y:9,type:O.SPIKES_TWO,count:0}],_=[{x:3,y:1,state:c.IDLE,type:O.BURST,direction:y.TOP},{x:3,y:4,state:c.IDLE,type:O.BURST,direction:y.TOP},{x:3,y:5,state:c.IDLE,type:O.BURST,direction:y.TOP},{x:2,y:10,state:c.IDLE,type:O.BURST,direction:y.TOP},{x:3,y:10,state:c.IDLE,type:O.BURST,direction:y.TOP}],E={x:0,y:1,direction:y.LEFT,state:c.IDLE,type:O.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:T,bursts:_,door:E});L._RF.pop()}}}));

System.register("chunks:///_virtual/DoorSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./StateMachine.ts","./DoorIdleSubStateMachines.ts","./DoorDeathSubStateMachines.ts"],(function(t){"use strict";var e,n,i,a,r,s,c,o,h,u,p;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,r=t.asyncToGenerator},function(t){s=t.PARAMS_NAME_ENUM},function(t){c=t.GetParamsTrigger,o=t.GetParamsNUmber,h=t.StateMachine},function(t){u=t.default},function(t){p=t.default}],execute:function(){var f;e._RF.push({},"82d5drDku9BlJk7ncV5ZlC5","DoorSubMachine",void 0);var M=n.ccclass;n.property,t("DoorSubMachine",M("DoorSubMachine")(f=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initEventMachine(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initEventMachine=function(){this.animationComponent.on(i.EventType.FINISHED,(function(){}))},n.initParams=function(){this.param.set(s.IDLE,c()),this.param.set(s.DEATH,c()),this.param.set(s.DRIECTION,o())},n.initStateMachine=function(){this.stateMachine.set(s.IDLE,new u(this)),this.stateMachine.set(s.DEATH,new p(this))},n.run=function(){switch(this.currentState){case this.stateMachine.get(s.IDLE):case this.stateMachine.get(s.DEATH):this.param.get(s.DEATH).value?this.currentState=this.stateMachine.get(s.DEATH):this.param.get(s.IDLE).value?this.currentState=this.stateMachine.get(s.IDLE):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(s.IDLE)}},e}(h))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/BlockblackStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,c,a,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){c=t.DRIECTION_ENUM},function(t){a=t.IdleTurnStateMachie},function(t){i=t.State}],execute:function(){e._RF.push({},"89ef1ycB/dONogNorY5TOcc","BlockblackStateMachine",void 0);var s="texture/player/blockback";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(c.TOP,new i(e,s+"/top")),n.stateMachine.set(c.BOTTOM,new i(e,s+"/bottom")),n.stateMachine.set(c.LEFT,new i(e,s+"/left")),n.stateMachine.set(c.RIGHT,new i(e,s+"/right")),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/DataManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,i,s,o,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,i=t.createClass,s=t.defineProperty,o=t.assertThisInitialized},function(t){r=t.default}],execute:function(){e._RF.push({},"8a79e9sTlVCOqLAb+6avxnB","DataManager",void 0);t("default",function(t){function e(){var e;return e=t.call(this)||this,s(o(e),"mapInfo",[]),s(o(e),"mapRowCount",0),s(o(e),"mapColumnCount",0),s(o(e),"levelindex",1),s(o(e),"tileInfo",[]),s(o(e),"player",void 0),s(o(e),"enemes",void 0),s(o(e),"door",void 0),s(o(e),"burst",void 0),s(o(e),"spikes",void 0),s(o(e),"smoke",void 0),s(o(e),"record",void 0),e.reset(),e}return n(e,t),e.prototype.reset=function(){this.mapInfo=[],this.mapColumnCount=0,this.tileInfo=[],this.mapRowCount=0,this.player=null,this.enemes=[],this.door=null,this.burst=[],this.spikes=[],this.smoke=[],this.record=[]},i(e,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc"],(function(E){"use strict";var T;return{setters:[function(E){T=E.cclegacy}],execute:function(){var O,R,_,L,N,I,S,A,K,U,C,P,M,F;E({CONTROLLER_ENMU:void 0,DIRECTION_ORDER_ENUM:void 0,DRIECTION_ENUM:void 0,ENTINY_STATE_ENUM:void 0,ENTITY_TYPE_ENUM:void 0,EVENTMANAGER:void 0,FMS_PARAMS_ENUM:void 0,PARAMS_NAME_ENUM:void 0,SCENE_ENUM:void 0,SHAKE_DIRECTION_ENMU:void 0,SPIKES_COUNT_ENUM:void 0,SPIKES_COUNT_MAP_NUMBER_ENUM:void 0,SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM:void 0,TILE_TYPE_ENUM:void 0}),T._RF.push({},"8d159NUPipFGIW68n2BLUj6","index",void 0),function(E){E.WALL_LEFT_TOP="WALL_LEFT_TOP",E.WALL_COLUMN="WALL_COLUMN",E.WALL_LEFT_BOTTOM="WALL_LEFT_BOTTOM",E.CLIFF_LEFT="CLIFF_LEFT",E.WALL_RIGHT_BOTTOM="WALL_RIGHT_BOTTOM",E.FLOOR="FLOOR",E.CLIFF_CENTER="CLIFF_CENTER",E.WALL_ROW="WALL_ROW",E.WALL_RIGHT_TOP="WALL_RIGHT_TOP",E.CLIFF_RIGHT="CLIFF_RIGHT"}(O||(O=E("TILE_TYPE_ENUM",{}))),function(E){E.NEXT_LEVEL="NEXT_LEVEL",E.PLAYER_CONTROLLER="PLAYER_CONTROLLER",E.PLAYERMOVE_END="PLAYER_END",E.PLAYER_BORN="PLAYER_BORN",E.ATTACK_PLAYER="ATTACK_PLAYER",E.ATTACK_ENEMY="ATTACK_ENEMY",E.DOOR_OPEN="DOOR_OPEN",E.SMOKE_SHOW="SMOKE_SHOW",E.SHAKE_SHOW="SHAKE_SHOW",E.RECORD_STEP="RECORD_STEP",E.REVOKE_STEP="REVOKE_STEP",E.RESTART="RESTART",E.EXIT="EXIT"}(R||(R=E("EVENTMANAGER",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT",E.TURN_LEFT="TURN_LEFT",E.TURN_RIGHT="TURN_RIGHT"}(_||(_=E("CONTROLLER_ENMU",{}))),function(E){E.TRIGER="TRIGER",E.NUMBER="NUMBER"}(L||(L=E("FMS_PARAMS_ENUM",{}))),function(E){E.IDLE="IDLE",E.TURN_LEFT="TURN_LEFT",E.DRIECTION="DRIECTION",E.TURN_RIGHT="TURN_RIGHT",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.BLOCKBACK="BLOCKBACK",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT",E.ATTACK="ATTACK",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH",E.SPIKES_TOTAL_COUNT="SPIKES_TOTAL_COUNT",E.SPIKES_CUR_COUNT="SPIKES_CUR_COUNT"}(N||(N=E("PARAMS_NAME_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT"}(I||(I=E("DRIECTION_ENUM",{}))),function(E){E.IDLE="IDLE",E.TURN_LEFT="TURN_LEFT",E.TURN_RIGHT="TURN_RIGHT",E.BLOCKFRONT="BLOCKFRONT",E.BLOCKTURNLEFT="BLOCKTURNLEFT",E.BLOCKBACK="BLOCKBACK",E.BLOCKLEFT="BLOCKLEFT",E.BLOCKRIGHT="BLOCKRIGHT",E.BLOCKTURNRIGHT="BLOCKTURNRIGHT",E.ATTACK="ATTACK",E.DEATH="DEATH",E.AIRDEATH="AIRDEATH"}(S||(S=E("ENTINY_STATE_ENUM",{}))),function(E){E[E.TOP=0]="TOP",E[E.BOTTOM=1]="BOTTOM",E[E.LEFT=2]="LEFT",E[E.RIGHT=3]="RIGHT"}(A||(A=E("DIRECTION_ORDER_ENUM",{}))),function(E){E.PLAYER="PLAYER",E.WOODENSKELETON="WOODENSKELETON",E.DOOR="DOOR",E.IRONSKELETON="IRONSKELETON",E.BURST="BURST",E.SPIKES_ONE="SPIKES_ONE",E.SPIKES_TWO="SPIKES_TWO",E.SPIKES_THREE="SPIKES_THREE",E.SPIKES_FOUR="SPIKES_FOUR",E.SMOKE="SMOKE"}(K||(K=E("ENTITY_TYPE_ENUM",{}))),function(E){E[E.SPIKES_ONE=2]="SPIKES_ONE",E[E.SPIKES_TWO=3]="SPIKES_TWO",E[E.SPIKES_THREE=4]="SPIKES_THREE",E[E.SPIKES_FOUR=5]="SPIKES_FOUR"}(U||(U=E("SPIKES_TYPE_MAP_TOTAL_COUNT_ENUM",{}))),function(E){E.ZERO="ZERO",E.ONE="ONE",E.TWO="TWO",E.THREE="THREE",E.FOUR="FOUR",E.FIVE="FIVE"}(C||(C=E("SPIKES_COUNT_ENUM",{}))),function(E){E[E.ZERO=0]="ZERO",E[E.ONE=1]="ONE",E[E.TWO=2]="TWO",E[E.THREE=3]="THREE",E[E.FOUR=4]="FOUR",E[E.FIVE=5]="FIVE"}(P||(P=E("SPIKES_COUNT_MAP_NUMBER_ENUM",{}))),function(E){E.TOP="TOP",E.BOTTOM="BOTTOM",E.LEFT="LEFT",E.RIGHT="RIGHT"}(M||(M=E("SHAKE_DIRECTION_ENMU",{}))),function(E){E.strat="start",E.scene="scene",E.loading="loading"}(F||(F=E("SCENE_ENUM",{}))),T._RF.pop()}}}));

System.register("chunks:///_virtual/level18.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,c,s,y;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,c=t.DRIECTION_ENUM,s=t.ENTINY_STATE_ENUM,y=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"8dd309jCaFJtZkhwrGYpwLB","level18",void 0);var r=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:null,type:null},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],p={x:3,y:8,direction:c.LEFT,state:s.IDLE,type:y.PLAYER},l=[{x:1,y:1,direction:c.BOTTOM,state:s.IDLE,type:y.WOODENSKELETON},{x:3,y:2,direction:c.BOTTOM,state:s.IDLE,type:y.WOODENSKELETON}],O=[{x:1,y:4,type:y.SPIKES_TWO,count:0},{x:1,y:6,type:y.SPIKES_TWO,count:0},{x:1,y:8,type:y.SPIKES_FOUR,count:0}],_=[{x:1,y:5,state:s.IDLE,type:y.BURST,direction:c.TOP},{x:2,y:9,state:s.IDLE,type:y.BURST,direction:c.TOP}],n={x:5,y:2,direction:c.LEFT,state:s.IDLE,type:y.DOOR};t("default",{mapInfo:r,player:p,enemies:l,spikes:O,bursts:_,door:n});L._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./DataManager.ts","./MusicManager.ts","./PlayerManager.ts","./SpikesManager.ts","./WoodenSkeletonManager.ts","./SmokeManager.ts","./index2.ts","./ShakeManager.ts","./DoorManager.ts","./IronskeletonManager.ts","./BurstManager.ts","./TlieMapManager.ts","./FaderManager.ts"],(function(e){"use strict";var t,n,r,a,s,i,o,c,u,p,l,h,f,d,I,y,g,m,v,x,E,k,M,S,R,T,P,L,C,D;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.AudioClip,a=e.director,s=e.Component},function(e){i=e.creatUINode},function(e){o=e.applyDecoratedDescriptor,c=e.inheritsLoose,u=e.initializerDefineProperty,p=e.assertThisInitialized,l=e.defineProperty,h=e.asyncToGenerator},function(e){f=e.SCENE_ENUM,d=e.EVENTMANAGER,I=e.ENTINY_STATE_ENUM,y=e.ENTITY_TYPE_ENUM},function(e){g=e.default},function(e){m=e.default},function(e){v=e.default},function(e){x=e.PlayerManager},function(e){E=e.SpikesManager},function(e){k=e.WoodenSkeletonManager},function(e){M=e.SmokeManager},function(e){S=e.default},function(e){R=e.ShakeManager},function(e){T=e.DoorManager},function(e){P=e.IronskeletonManager},function(e){L=e.BurstManager},function(e){C=e.TlieMapManager},function(e){D=e.default}],execute:function(){var b,w,_,N,A;t._RF.push({},"91725WHhqRC5bd9qAUCdu+z","BattleManager",void 0);var O=n.ccclass,B=n.property;e("BattleManager",(b=O("BattleManager"),w=B(r),b((A=o((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,u(p(t),"clip",A,p(t)),l(p(t),"levelss",void 0),l(p(t),"stage",null),l(p(t),"smokeLayer",null),l(p(t),"hasinited",!1),t}c(t,e);var n=t.prototype;return n.start=function(){this.initScence()},n.initScence=function(){this.generaterStage(),this.initLevel()},n.onLoad=function(){a.preloadScene(f.strat),m.Instance.levelindex=1,g.Instance.on(d.NEXT_LEVEL,this.nextlevel,this),g.Instance.on(d.PLAYERMOVE_END,this.CheeckDoor,this),g.Instance.on(d.SMOKE_SHOW,this.generaterSmoke,this),g.Instance.on(d.RECORD_STEP,this.record,this),g.Instance.on(d.REVOKE_STEP,this.revoke,this),g.Instance.on(d.RESTART,this.reStart,this),g.Instance.on(d.EXIT,this.exit,this)},n.onDestroy=function(){g.Instance.off(d.NEXT_LEVEL,this.nextlevel),g.Instance.off(d.PLAYERMOVE_END,this.CheeckDoor),g.Instance.off(d.SMOKE_SHOW,this.generaterSmoke),g.Instance.off(d.RECORD_STEP,this.record),g.Instance.off(d.REVOKE_STEP,this.revoke),g.Instance.off(d.RESTART,this.reStart),g.Instance.off(d.EXIT,this.exit),g.Instance.clear()},n.reStart=function(){v.Instance.stop(),this.initLevel()},n.exit=function(){this.node.destroy(),v.Instance.destory(),a.loadScene(f.strat)},n.initLevel=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=S["level"+m.Instance.levelindex])){e.next=32;break}if(!this.hasinited){e.next=7;break}return e.next=5,D.Instance.fadeIn();case 5:e.next=9;break;case 7:return e.next=9,D.Instance.mask();case 9:return this.clearlevel(),this.levelss=t,m.Instance.mapInfo=this.levelss.mapInfo,m.Instance.mapColumnCount=(null===(n=this.levelss.mapInfo[0])||void 0===n?void 0:n.length)||0,m.Instance.mapRowCount=this.levelss.mapInfo.length||0,e.next=16,Promise.all([this.generateTileMap(),this.generaterDoor(),this.generaterEnemy(),this.generaterSmokeLayer(),this.generaterSpikes(),this.generaterBurst()]);case 16:return e.t0=Promise,e.next=19,this.generaterPlayer();case 19:return e.t1=e.sent,e.next=22,D.Instance.fadeOut();case 22:return e.t2=e.sent,e.next=25,v.Instance.play(!0,this.clip);case 25:return e.t3=e.sent,e.t4=[e.t1,e.t2,e.t3],e.next=29,e.t0.all.call(e.t0,e.t4);case 29:this.hasinited=!0,e.next=33;break;case 32:this.exit();case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.nextlevel=function(){m.Instance.levelindex++,this.initLevel()},n.clearlevel=function(){this.stage.destroyAllChildren(),m.Instance.reset()},n.generaterStage=function(){this.stage=i(),this.stage.setParent(this.node),this.stage.setSiblingIndex(2),this.stage.addComponent(R)},n.generateTileMap=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i()).setParent(this.stage),n=t.addComponent(C),e.next=5,n.init();case 5:this.adaptor();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterPlayer=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i()).setParent(this.stage),n=t.addComponent(x),e.next=5,n.init(this.levelss.player);case 5:m.Instance.player=n,g.Instance.emit(d.PLAYER_BORN,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterEnemy=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n,r,a,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(m.Instance.enemes=[],t=[],n=0;n<this.levelss.enemies.length;n++)r=this.levelss.enemies[n],(a=i()).setParent(this.stage),s=r.type===y.WOODENSKELETON?k:P,o=a.addComponent(s),t.push(o.init(r)),m.Instance.enemes.push(o);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterDoor=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=i()).setParent(this.stage),n=t.addComponent(T),e.next=5,n.init(this.levelss.door);case 5:m.Instance.door=n;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterBurst=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],m.Instance.burst=[],n=0;n<this.levelss.bursts.length;n++)r=this.levelss.bursts[n],(a=i()).setParent(this.stage),s=a.addComponent(L),t.push(s.init(r)),m.Instance.burst.push(s);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterSpikes=function(){var e=h(regeneratorRuntime.mark((function e(){var t,n,r,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],m.Instance.spikes=[],n=0;n<this.levelss.spikes.length;n++)r=this.levelss.spikes[n],(a=i()).setParent(this.stage),s=a.addComponent(E),t.push(s.init(r)),m.Instance.spikes.push(s);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterSmokeLayer=function(){var e=h(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.smokeLayer=i(),this.smokeLayer.setParent(this.stage);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.generaterSmoke=function(){var e=h(regeneratorRuntime.mark((function e(t,n,r){var a,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=m.Instance.smoke.find((function(e){return e.state===I.DEATH})))){e.next=9;break}a.x=n,a.y=r,a.direction=t,a.node.setPosition(55*a.x,55*-a),a.state=I.IDLE,e.next=15;break;case 9:return(s=i()).setParent(this.smokeLayer),o=s.addComponent(M),e.next=14,o.init({x:n,y:r,direction:t,state:I.IDLE,type:y.SMOKE});case 14:m.Instance.smoke.push(o);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.adaptor=function(){var e=m.Instance,t=e.mapColumnCount,n=e.mapRowCount/2*55,r=55*t/2+80;this.stage.setPosition(-n,r),this.stage.getComponent(R).stop()},n.CheeckDoor=function(){var e=m.Instance.player,t=e.x,n=e.y,r=m.Instance.door,a=r.x,s=r.y,i=r.state;a===t&&s===n&&i===I.DEATH&&g.Instance.emit(d.NEXT_LEVEL)},n.record=function(){var e={player:{x:m.Instance.player.x,y:m.Instance.player.y,type:m.Instance.player.type,direction:m.Instance.player.direction,state:m.Instance.player.state===I.AIRDEATH||m.Instance.player.state===I.DEATH||m.Instance.player.state===I.IDLE?m.Instance.player.state:I.IDLE},door:{x:m.Instance.door.x,y:m.Instance.door.y,type:m.Instance.door.type,direction:m.Instance.door.direction,state:m.Instance.door.state},enemies:m.Instance.enemes.map((function(e){return{x:e.x,y:e.y,direction:e.direction,state:e.state,type:e.type}})),bursts:m.Instance.burst.map((function(e){return{x:e.x,y:e.y,direction:e.direction,state:e.state,type:e.type}})),spikes:m.Instance.spikes.map((function(e){return{x:e.x,y:e.y,count:e.count,type:e.type}}))};m.Instance.record.push(e)},n.revoke=function(){var e=m.Instance.record.pop();if(e){m.Instance.player.x=m.Instance.player.targetX=e.player.x,m.Instance.player.y=m.Instance.player.targetY=e.player.y,m.Instance.player.state=e.player.state,m.Instance.player.direction=e.player.direction,m.Instance.door.x=e.door.x,m.Instance.door.y=e.door.y,m.Instance.door.state=e.door.state,m.Instance.door.direction=e.door.direction;for(var t=0;t<m.Instance.enemes.length;t++){var n=e.enemies[t];m.Instance.enemes[t].x=n.x,m.Instance.enemes[t].y=n.y,m.Instance.enemes[t].state=n.state,m.Instance.enemes[t].direction=n.direction,m.Instance.enemes[t].type=n.type}for(var r=0;r<m.Instance.burst.length;r++){var a=e.bursts[r];m.Instance.burst[r].x=a.x,m.Instance.burst[r].y=a.y,m.Instance.burst[r].state=a.state,m.Instance.burst[r].direction=a.direction}for(var s=0;s<m.Instance.spikes.length;s++){var i=e.spikes[s];m.Instance.spikes[s].x=i.x,m.Instance.spikes[s].y=i.y,m.Instance.spikes[s].count=i.count,m.Instance.spikes[s].type=i.type}}},t}(s)).prototype,"clip",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=N))||_));t._RF.pop()}}}));

System.register("chunks:///_virtual/IdleSubStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(e){"use strict";var t,n,o,a,i,s;return{setters:[function(e){t=e.cclegacy,n=e.AnimationClip},function(e){o=e.inheritsLoose},function(e){a=e.DRIECTION_ENUM},function(e){i=e.IdleTurnStateMachie},function(e){s=e.State}],execute:function(){t._RF.push({},"959c5y1GydMeaRVxVZTSmdC","IdleSubStateMachines",void 0);var c="texture/woodenskeleton/idle";e("default",function(e){function t(t){var o;return(o=e.call(this,t)||this).stateMachine.set(a.TOP,new s(t,c+"/top",n.WrapMode.Loop)),o.stateMachine.set(a.BOTTOM,new s(t,c+"/bottom",n.WrapMode.Loop)),o.stateMachine.set(a.LEFT,new s(t,c+"/left",n.WrapMode.Loop)),o.stateMachine.set(a.RIGHT,new s(t,c+"/right",n.WrapMode.Loop)),o}return o(t,e),t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/SmokeIdleStateMachines.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EnityManger.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,i,s,a,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DRIECTION_ENUM},function(t){s=t.ANIMATION_SPEED},function(t){a=t.IdleTurnStateMachie},function(t){c=t.State}],execute:function(){e._RF.push({},"9a757I4WfRP0IeUOGe9JQYp","SmokeIdleStateMachines",void 0);var u="texture/smoke/idle";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(i.TOP,new c(e,u+"/top",s/1.5)),n.stateMachine.set(i.BOTTOM,new c(e,u+"/bottom",s/1.5)),n.stateMachine.set(i.LEFT,new c(e,u+"/left",s/1.5)),n.stateMachine.set(i.RIGHT,new c(e,u+"/right",s/1.5)),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/level2.ts",["cc","./index3.ts"],(function(L){"use strict";var e,t,O,s,c;return{setters:[function(L){e=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,O=L.DRIECTION_ENUM,s=L.ENTINY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"9e8460anQ1GH5WkAOWVIGfL","level2",void 0);var r=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:22,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],y={x:2,y:0,direction:O.BOTTOM,state:s.IDLE,type:c.PLAYER},p=[{x:3,y:2,direction:O.TOP,state:s.IDLE,type:c.WOODENSKELETON},{x:4,y:3,direction:O.TOP,state:s.IDLE,type:c.WOODENSKELETON}],_={x:5,y:3,direction:O.LEFT,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:y,enemies:p,spikes:[],bursts:[],door:_});e._RF.pop()}}}));

System.register("chunks:///_virtual/FaderManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts","./DrawManager.ts"],(function(e){"use strict";var t,n,r,a,i,o,s,u,d,f,c;return{setters:[function(e){t=e.cclegacy,n=e.RenderRoot2D,r=e.game},function(e){a=e.creatUINode},function(e){i=e.inheritsLoose,o=e.createClass,s=e.defineProperty,u=e.assertThisInitialized},function(e){d=e.default},function(e){f=e.DURATION,c=e.DrawManager}],execute:function(){t._RF.push({},"a00d2ezNL5Cjo0mLHoLAjc3","FaderManager",void 0);e("default",function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,s(u(t),"_fader",null),t}i(t,e);var d=t.prototype;return d.fadeIn=function(e){return void 0===e&&(e=f),this.fader.fadeIn(e)},d.fadeOut=function(e){return void 0===e&&(e=f),this.fader.fadeOut(e)},d.mask=function(){return this.fader.mask()},o(t,[{key:"fader",get:function(){if(null!==this._fader)return this._fader;var e=a();e.addComponent(n);var t=a();return t.setParent(e),this._fader=t.addComponent(c),this._fader.init(),r.addPersistRootNode(e),this._fader}}],[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),t}(d));t._RF.pop()}}}));

System.register("chunks:///_virtual/level15.ts",["cc","./index3.ts"],(function(L){"use strict";var t,e,s,c,y;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,s=L.DRIECTION_ENUM,c=L.ENTINY_STATE_ENUM,y=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"a01e1JiVCNL7osS4RlWK+o1","level15",void 0);var r=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:22,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:25,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_TOP},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:e.FLOOR},{src:22,type:e.WALL_ROW},{src:28,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}]],O={x:0,y:1,direction:s.RIGHT,state:c.IDLE,type:y.PLAYER},p=[{x:2,y:4,direction:s.TOP,state:c.IDLE,type:y.WOODENSKELETON},{x:4,y:6,direction:s.TOP,state:c.IDLE,type:y.WOODENSKELETON}],l=[{x:1,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:2,type:y.SPIKES_THREE,count:0},{x:2,y:6,type:y.SPIKES_TWO,count:0}],_={x:7,y:7,direction:s.LEFT,state:c.IDLE,type:y.DOOR};L("default",{mapInfo:r,player:O,enemies:p,spikes:l,bursts:[],door:_});t._RF.pop()}}}));

System.register("chunks:///_virtual/level19.ts",["cc","./index3.ts"],(function(L){"use strict";var t,e,s,y,c;return{setters:[function(L){t=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,s=L.DRIECTION_ENUM,y=L.ENTINY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"a2c261GB/dEsYhYyhnNapot","level19",void 0);var O=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:e.FLOOR},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:21,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:21,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT}]],r={x:0,y:1,direction:s.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:2,y:5,direction:s.TOP,state:y.IDLE,type:c.WOODENSKELETON},{x:4,y:9,direction:s.TOP,state:y.IDLE,type:c.WOODENSKELETON}],R=[{x:1,y:5,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:8,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:1,y:9,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:6,state:y.IDLE,type:c.BURST,direction:s.TOP},{x:2,y:7,state:y.IDLE,type:c.BURST,direction:s.TOP}],_={x:6,y:9,direction:s.LEFT,state:y.IDLE,type:c.DOOR};L("default",{mapInfo:O,player:r,enemies:p,spikes:[],bursts:R,door:_});t._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesThreeSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./State.ts","./SpikesSubMachine.ts"],(function(e){"use strict";var t,n,s,i,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.State},function(e){c=e.default}],execute:function(){t._RF.push({},"a5e1evtdiVAyIBRO0EZxzIC","SpikesThreeSubMachine",void 0);var u="texture/spikes/spikesthree";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachine.set(s.ZERO,new i(t,u+"/zero")),n.stateMachine.set(s.ONE,new i(t,u+"/one")),n.stateMachine.set(s.TWO,new i(t,u+"/two")),n.stateMachine.set(s.THREE,new i(t,u+"/three")),n.stateMachine.set(s.FOUR,new i(t,u+"/four")),n}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/level16.ts",["cc","./index3.ts"],(function(t){"use strict";var L,e,O,y,c;return{setters:[function(t){L=t.cclegacy},function(t){e=t.TILE_TYPE_ENUM,O=t.DRIECTION_ENUM,y=t.ENTINY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){L._RF.push({},"a7dcc48Na5KQZZmJGUM0Fdp","level16",void 0);var s=[[{src:20,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT},{src:null,type:null}]],r={x:0,y:1,direction:O.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:4,y:4,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:5,y:3,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:6,y:2,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:4,y:6,direction:O.TOP,state:y.IDLE,type:c.WOODENSKELETON},{x:4,y:7,direction:O.TOP,state:y.IDLE,type:c.IRONSKELETON}],R=[{x:4,y:5,type:c.SPIKES_THREE,count:0},{x:5,y:5,type:c.SPIKES_TWO,count:0},{x:6,y:5,type:c.SPIKES_ONE,count:0}],_=[{x:3,y:5,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:6,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:7,state:y.IDLE,type:c.BURST,direction:O.TOP}],E={x:0,y:7,direction:O.LEFT,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:R,bursts:_,door:E});L._RF.pop()}}}));

System.register("chunks:///_virtual/AirDeathSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,i,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){i=t.IdleTurnStateMachie},function(t){s=t.State}],execute:function(){e._RF.push({},"a9a39IVSkZI2JffLv+5fVSs","AirDeathSubStateMachine",void 0);var c="texture/player/airdeath";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new s(e,c+"/top")),n.stateMachine.set(a.BOTTOM,new s(e,c+"/bottom")),n.stateMachine.set(a.LEFT,new s(e,c+"/left")),n.stateMachine.set(a.RIGHT,new s(e,c+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/State.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./PlayerManager.ts","./ResourcesManager.ts"],(function(t){"use strict";var i,n,e,a,o,r,s,p,u,c;return{setters:[function(t){i=t.cclegacy,n=t.AnimationClip,e=t.animation,a=t.Sprite},function(t){o=t.sortspriteFrame},function(t){r=t.defineProperty,s=t.asyncToGenerator,p=t.createForOfIteratorHelperLoose},function(t){u=t.ANIMATION_SPEED},function(t){c=t.default}],execute:function(){i._RF.push({},"ac66b5B21BJJ4zc9rnaV4oF","State",void 0);t("State",function(){function t(t,i,e,a,o){void 0===e&&(e=n.WrapMode.Normal),void 0===a&&(a=u),void 0===o&&(o=[]),r(this,"animationClip",void 0),this.fsm=t,this.path=i,this.warpMode=e,this.speed=a,this.events=o,this.init()}var i=t.prototype;return i.init=function(){var t=s(regeneratorRuntime.mark((function t(){var i,r,s,h,l,m,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.Instance.loaddir(this.path),this.fsm.waitingList.push(i),this.animationClip=new n,this.animationClip.name=this.path,t.next=6,i;case 6:for(r=t.sent,(s=new e.ObjectTrack).path=(new e.TrackPath).toComponent(a).toProperty("spriteFrame"),h=o(r).map((function(t,i){return[f.speed*i,t]})),s.channel.curve.assignSorted(h),this.animationClip.addTrack(s),this.animationClip.duration=r.length*u,this.animationClip.wrapMode=this.warpMode,l=p(this.events);!(m=l()).done;)d=m.value,this.animationClip.events.push(d);this.animationClip.updateEventDatas();case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.run=function(){var t,i;(null===(t=this.fsm)||void 0===t||null===(i=t.animationComponent)||void 0===i?void 0:i.defaultClip)!==this.animationClip&&(this.fsm.animationComponent.defaultClip=this.animationClip,this.fsm.animationComponent.play())},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/MenuManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts"],(function(n){"use strict";var e,t,a,r,c,u;return{setters:[function(n){e=n.cclegacy,t=n._decorator,a=n.Component},function(n){r=n.inheritsLoose},function(n){c=n.EVENTMANAGER},function(n){u=n.default}],execute:function(){var i;e._RF.push({},"ae5776aNMlGha3EXba69FsJ","MenuManager",void 0);var o=t.ccclass;n("MenuManager",o("MenuManager")(i=function(n){function e(){return n.apply(this,arguments)||this}r(e,n);var t=e.prototype;return t.revoke=function(){u.Instance.emit(c.REVOKE_STEP)},t.restart=function(){u.Instance.emit(c.RESTART)},t.exit=function(){u.Instance.emit(c.EXIT)},e}(a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesTwoSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./State.ts","./SpikesSubMachine.ts"],(function(e){"use strict";var t,n,s,i,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.SPIKES_COUNT_ENUM},function(e){i=e.State},function(e){c=e.default}],execute:function(){t._RF.push({},"aec46pdkExHMbyuAa3rGT5d","SpikesTwoSubMachine",void 0);var u="texture/spikes/spikestwo";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachine.set(s.ZERO,new i(t,u+"/zero")),n.stateMachine.set(s.ONE,new i(t,u+"/one")),n.stateMachine.set(s.TWO,new i(t,u+"/two")),n.stateMachine.set(s.THREE,new i(t,u+"/three")),n}return n(t,e),t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/level8.ts",["cc","./index3.ts"],(function(l){"use strict";var t,e,n,s,y;return{setters:[function(l){t=l.cclegacy},function(l){e=l.TILE_TYPE_ENUM,n=l.DRIECTION_ENUM,s=l.ENTINY_STATE_ENUM,y=l.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"b062eem6qVFaai2hbLAR868","level8",void 0);var c=[[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:23,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:20,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:9,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:21,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:17,type:e.CLIFF_CENTER},{src:null,type:null},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:24,type:e.WALL_ROW},{src:18,type:e.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],r={x:1,y:7,direction:n.TOP,state:s.IDLE,type:y.PLAYER},p=[{x:8,y:1,direction:n.LEFT,state:s.IDLE,type:y.WOODENSKELETON}],u=[{x:1,y:2,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:1,y:5,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:1,y:6,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:2,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:3,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:4,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:5,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:6,y:1,state:s.IDLE,type:y.BURST,direction:n.TOP},{x:6,y:2,state:s.IDLE,type:y.BURST,direction:n.TOP}],L={x:9,y:1,direction:n.LEFT,state:s.IDLE,type:y.DOOR};l("default",{mapInfo:c,player:r,enemies:p,spikes:[],bursts:u,door:L});t._RF.pop()}}}));

System.register("chunks:///_virtual/IronskeletonDeathsubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,s,i,a;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){s=t.DRIECTION_ENUM},function(t){i=t.IdleTurnStateMachie},function(t){a=t.State}],execute:function(){e._RF.push({},"b88bckrjQ5KQZzPFmTDKb7I","IronskeletonDeathsubMachine",void 0);var c="texture/ironskeleton/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(s.TOP,new a(e,c+"/top")),n.stateMachine.set(s.BOTTOM,new a(e,c+"/bottom")),n.stateMachine.set(s.LEFT,new a(e,c+"/left")),n.stateMachine.set(s.RIGHT,new a(e,c+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./PlayerManager.ts","./State.ts"],(function(t){"use strict";var e,a,n,c,r,o,i,s;return{setters:[function(t){e=t.cclegacy,a=t.AnimationClip},function(t){n=t.inheritsLoose},function(t){c=t.DRIECTION_ENUM,r=t.SHAKE_DIRECTION_ENMU},function(t){o=t.IdleTurnStateMachie},function(t){i=t.ANIMATION_SPEED},function(t){s=t.State}],execute:function(){e._RF.push({},"b8d60H2YZ5IL5JjcC9kbckN","AttackSubStateMachine",void 0);var u="texture/player/attack";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(c.TOP,new s(e,u+"/top",a.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.TOP]}])),n.stateMachine.set(c.BOTTOM,new s(e,u+"/bottom",a.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.BOTTOM]}])),n.stateMachine.set(c.LEFT,new s(e,u+"/left",a.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.LEFT]}])),n.stateMachine.set(c.RIGHT,new s(e,u+"/right",a.WrapMode.Normal,i,[{frame:4*i,func:"onAttackShake",params:[r.RIGHT]}])),n}return n(e,t),e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts"],(function(t){"use strict";var e,r,a,n,i,s,u,c,o;return{setters:[function(t){e=t.cclegacy,r=t._decorator,a=t.Component},function(t){n=t.inheritsLoose,i=t.defineProperty,s=t.assertThisInitialized,u=t.createForOfIteratorHelperLoose,c=t.createClass},function(t){o=t.FMS_PARAMS_ENUM}],execute:function(){var p;e._RF.push({},"b9130nM5gVABLpd7tZZ49wL","StateMachine",void 0);var h=r.ccclass;r.property,t("GetParamsTrigger",(function(){return{type:o.TRIGER,value:!1}})),t("GetParamsNUmber",(function(){return{type:o.NUMBER,value:0}})),t("StateMachine",h("StateMachine")(p=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(s(e),"_currentState",null),i(s(e),"animationComponent",void 0),i(s(e),"waitingList",[]),i(s(e),"param",new Map),i(s(e),"stateMachine",new Map),e}n(e,t);var r=e.prototype;return r.getParams=function(t){if(this.param.has(t))return this.param.get(t).value},r.setParams=function(t,e){this.param.has(t)&&(this.param.get(t).value=e,this.run(),this.reseTrigger())},r.reseTrigger=function(){for(var t,e=u(this.param);!(t=e()).done;){var r=t.value[1];r.type===o.TRIGER&&(r.value=!1)}},c(e,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.run())}}]),e}(a))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/level7.ts",["cc","./index3.ts"],(function(L){"use strict";var O,t,e,c,s;return{setters:[function(L){O=L.cclegacy},function(L){t=L.TILE_TYPE_ENUM,e=L.DRIECTION_ENUM,c=L.ENTINY_STATE_ENUM,s=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"c2da0lA129I9q5+G3ivfkE8","level7",void 0);var y=[[{src:16,type:t.WALL_LEFT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:13,type:t.WALL_LEFT_BOTTOM},{src:18,type:t.CLIFF_LEFT}],[{src:21,type:t.WALL_RIGHT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:21,type:t.WALL_RIGHT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:17,type:t.CLIFF_CENTER}],[{src:20,type:t.WALL_LEFT_BOTTOM},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:20,type:t.WALL_LEFT_BOTTOM},{src:17,type:t.CLIFF_CENTER}],[{src:9,type:t.WALL_ROW},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:1,type:t.FLOOR},{src:9,type:t.WALL_ROW},{src:17,type:t.CLIFF_CENTER}],[{src:15,type:t.WALL_RIGHT_TOP},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:5,type:t.WALL_COLUMN},{src:14,type:t.WALL_RIGHT_BOTTOM},{src:19,type:t.CLIFF_RIGHT}]],r={x:2,y:7,direction:e.TOP,state:c.IDLE,type:s.PLAYER},p=[{x:2,y:2,direction:e.BOTTOM,state:c.IDLE,type:s.WOODENSKELETON}],_=[{x:1,y:4,type:s.SPIKES_ONE,count:0},{x:2,y:4,type:s.SPIKES_TWO,count:0},{x:3,y:4,type:s.SPIKES_TWO,count:0},{x:4,y:4,type:s.SPIKES_THREE,count:0}],T={x:2,y:0,direction:e.BOTTOM,state:c.IDLE,type:s.DOOR};L("default",{mapInfo:y,player:r,enemies:p,spikes:_,bursts:[],door:T});O._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EnityManger.ts","./StateMachine.ts","./AirDeathSubStateMachine.ts","./AttackDeathSubStateMachine.ts","./AttackSubStateMachine.ts","./BlockblackStateMachine.ts","./BlockfrontStateMachine.ts","./BlockturnleftStateMachine.ts","./BlockturnrightStateMachine.ts","./IdleLeftStateMachine.ts","./TurnRightStateMachine.ts","./TurnLeftStateMachine.ts"],(function(t){"use strict";var e,a,i,n,s,h,c,r,u,T,o,M,l,R,p,f,L,m,g,E,A;return{setters:[function(t){e=t.cclegacy,a=t._decorator,i=t.Animation},function(t){n=t.inheritsLoose,s=t.asyncToGenerator},function(t){h=t.ENTINY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){r=t.EnityManger},function(t){u=t.GetParamsTrigger,T=t.GetParamsNUmber,o=t.StateMachine},function(t){M=t.default},function(t){l=t.default},function(t){R=t.default},function(t){p=t.default},function(t){f=t.default},function(t){L=t.default},function(t){m=t.default},function(t){g=t.default},function(t){E=t.default},function(t){A=t.default}],execute:function(){var C;e._RF.push({},"c8c892IvtRNr6MlZEAs7RQr","PlayerStateMachine",void 0);var S=a.ccclass;a.property,t("PlayerStateMachine",S("PlayerStateMachine")(C=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var a=e.prototype;return a.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.addComponent(i),this.initParams(),this.initStateMachine(),this.initEventMachine(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.initEventMachine=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["block","turn","attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(r).state=h.IDLE)}))},a.initParams=function(){this.param.set(c.IDLE,u()),this.param.set(c.TURN_LEFT,u()),this.param.set(c.TURN_RIGHT,u()),this.param.set(c.DRIECTION,T()),this.param.set(c.BLOCKFRONT,u()),this.param.set(c.BLOCKTURNLEFT,u()),this.param.set(c.BLOCKBACK,u()),this.param.set(c.BLOCKLEFT,u()),this.param.set(c.BLOCKRIGHT,u()),this.param.set(c.BLOCKTURNLEFT,u()),this.param.set(c.DEATH,u()),this.param.set(c.ATTACK,u()),this.param.set(c.AIRDEATH,u()),this.param.set(c.BLOCKTURNRIGHT,u())},a.initStateMachine=function(){this.stateMachine.set(c.IDLE,new g(this)),this.stateMachine.set(c.TURN_LEFT,new A(this)),this.stateMachine.set(c.TURN_RIGHT,new E(this)),this.stateMachine.set(c.BLOCKFRONT,new f(this)),this.stateMachine.set(c.BLOCKBACK,new p(this)),this.stateMachine.set(c.BLOCKTURNLEFT,new L(this)),this.stateMachine.set(c.DEATH,new l(this)),this.stateMachine.set(c.AIRDEATH,new M(this)),this.stateMachine.set(c.BLOCKTURNRIGHT,new m(this)),this.stateMachine.set(c.ATTACK,new R(this))},a.run=function(){switch(this.currentState){case this.stateMachine.get(c.TURN_LEFT):case this.stateMachine.get(c.DEATH):case this.stateMachine.get(c.ATTACK):case this.stateMachine.get(c.AIRDEATH):case this.stateMachine.get(c.TURN_RIGHT):case this.stateMachine.get(c.BLOCKFRONT):case this.stateMachine.get(c.BLOCKBACK):case this.stateMachine.get(c.BLOCKTURNLEFT):case this.stateMachine.get(c.IDLE):this.param.get(c.TURN_LEFT).value?this.currentState=this.stateMachine.get(c.TURN_LEFT):this.param.get(c.TURN_RIGHT).value?this.currentState=this.stateMachine.get(c.TURN_RIGHT):this.param.get(c.BLOCKTURNLEFT).value?this.currentState=this.stateMachine.get(c.BLOCKTURNLEFT):this.param.get(c.BLOCKTURNRIGHT).value?this.currentState=this.stateMachine.get(c.BLOCKTURNRIGHT):this.param.get(c.DEATH).value?this.currentState=this.stateMachine.get(c.DEATH):this.param.get(c.AIRDEATH).value?this.currentState=this.stateMachine.get(c.AIRDEATH):this.param.get(c.BLOCKFRONT).value?this.currentState=this.stateMachine.get(c.BLOCKFRONT):this.param.get(c.BLOCKBACK).value?this.currentState=this.stateMachine.get(c.BLOCKBACK):this.param.get(c.IDLE).value?this.currentState=this.stateMachine.get(c.IDLE):this.param.get(c.ATTACK).value?this.currentState=this.stateMachine.get(c.ATTACK):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(c.IDLE)}},e}(o))||C);e._RF.pop()}}}));

System.register("chunks:///_virtual/level11.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,O,y,c;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,O=t.DRIECTION_ENUM,y=t.ENTINY_STATE_ENUM,c=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"cfce4+xvvhAm4/QDMfe+IHR","level11",void 0);var s=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:13,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:24,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:24,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:15,type:L.WALL_RIGHT_TOP},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:22,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}]],r={x:0,y:3,direction:O.RIGHT,state:y.IDLE,type:c.PLAYER},p=[{x:4,y:2,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:6,y:1,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON},{x:9,y:1,direction:O.LEFT,state:y.IDLE,type:c.WOODENSKELETON}],R=[{x:4,y:1,type:c.SPIKES_THREE,count:0},{x:6,y:3,type:c.SPIKES_TWO,count:0}],_=[{x:3,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:3,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:5,y:2,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:3,state:y.IDLE,type:c.BURST,direction:O.TOP},{x:8,y:4,state:y.IDLE,type:c.BURST,direction:O.TOP}],T={x:9,y:0,direction:O.BOTTOM,state:y.IDLE,type:c.DOOR};t("default",{mapInfo:s,player:r,enemies:p,spikes:R,bursts:_,door:T});e._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(e){"use strict";var t,n,r,o,u,s;return{setters:[function(e){t=e.cclegacy,n=e.resources,r=e.SpriteFrame},function(e){o=e.inheritsLoose,u=e.createClass},function(e){s=e.default}],execute:function(){t._RF.push({},"d10b3IMtnpGmbMoqL/zTVl9","ResourcesManager",void 0);e("default",function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.loaddir=function(e,t){return void 0===t&&(t=r),new Promise((function(r,o){n.loadDir(e,t,(function(e,t){e?o(e):r(t)}))}))},u(t,null,[{key:"Instance",get:function(){return e.GetInstance.call(this)}}]),t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/SpikesSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./SubStateMachine.ts"],(function(t){"use strict";var e,n,i,u,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.PARAMS_NAME_ENUM,u=t.SPIKES_COUNT_MAP_NUMBER_ENUM},function(t){s=t.default}],execute:function(){e._RF.push({},"d40cf7+LD9BU719J4Rs/1+d","SpikesSubMachine",void 0);t("default",function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.run=function(){var t=this.fsm.param.get(i.SPIKES_CUR_COUNT).value;this.currentState=this.stateMachine.get(u[t])},e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./Singleton.ts"],(function(t){"use strict";var e,n,i,c,r,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose,i=t.createClass,c=t.defineProperty,r=t.assertThisInitialized},function(t){s=t.default}],execute:function(){e._RF.push({},"d4410nfygxPDqQYzWEhAoRA","EventManager",void 0);t("default",function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,c(r(e),"eventDic",new Map),e}n(e,t);var s=e.prototype;return s.on=function(t,e,n){this.eventDic.has(t)?this.eventDic.get(t).push({func:e,ctx:n}):this.eventDic.set(t,[{func:e,ctx:n}])},s.off=function(t,e){if(this.eventDic.has(t)){var n=this.eventDic.get(t).findIndex((function(t){return t.func===e}));n>-1&&this.eventDic.get(t).splice(n,1)}},s.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.eventDic.has(t)&&this.eventDic.get(t).forEach((function(t){var e=t.func,i=t.ctx;i?e.apply(i,n):e(n)}))},s.clear=function(){this.eventDic.clear()},i(e,null,[{key:"Instance",get:function(){return t.GetInstance.call(this)}}]),e}(s));e._RF.pop()}}}));

System.register("chunks:///_virtual/BurstMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./StateMachine.ts","./State.ts"],(function(t){"use strict";var e,i,n,a,s,r,c,h,u,o;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.PARAMS_NAME_ENUM},function(t){c=t.GetParamsTrigger,h=t.GetParamsNUmber,u=t.StateMachine},function(t){o=t.State}],execute:function(){var p;e._RF.push({},"d6b07EOUb9F9LURQr9MbWC5","BurstMachine",void 0);var M=i.ccclass,m=(i.property,"texture/burst");t("BurstMachine",M("BurstMachine")(p=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var i=e.prototype;return i.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(n),this.initParams(),this.initStateMachine(),this.initEventMachine(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.initEventMachine=function(){},i.initParams=function(){this.param.set(r.IDLE,c()),this.param.set(r.DRIECTION,h()),this.param.set(r.ATTACK,c()),this.param.set(r.DEATH,c())},i.initStateMachine=function(){this.stateMachine.set(r.IDLE,new o(this,m+"/idle")),this.stateMachine.set(r.ATTACK,new o(this,m+"/attack")),this.stateMachine.set(r.DEATH,new o(this,m+"/death"))},i.run=function(){switch(this.currentState){case this.stateMachine.get(r.IDLE):case this.stateMachine.get(r.DEATH):case this.stateMachine.get(r.ATTACK):this.param.get(r.ATTACK).value?this.currentState=this.stateMachine.get(r.ATTACK):this.param.get(r.IDLE).value?this.currentState=this.stateMachine.get(r.IDLE):this.param.get(r.DEATH).value?this.currentState=this.stateMachine.get(r.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(r.IDLE)}},e}(u))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/WoodenSkeletonSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EnityManger.ts","./StateMachine.ts","./AttackSubStateMachines.ts","./DeathSubStateMachines.ts","./IdleSubStateMachines.ts"],(function(t){"use strict";var e,n,i,a,s,r,c,o,h,u,M,p,S,f;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.ENTINY_STATE_ENUM,c=t.PARAMS_NAME_ENUM},function(t){o=t.EnityManger},function(t){h=t.GetParamsTrigger,u=t.GetParamsNUmber,M=t.StateMachine},function(t){p=t.default},function(t){S=t.default},function(t){f=t.default}],execute:function(){var l;e._RF.push({},"da52d/AWolMwancqN1oVRW7","WoodenSkeletonSubMachine",void 0);var m=n.ccclass;n.property,t("WoodenSkeletonSubMachine",m("WoodenSkeletonSubMachine")(l=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initEventMachine(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initEventMachine=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(o).state=r.IDLE)}))},n.initParams=function(){this.param.set(c.IDLE,h()),this.param.set(c.DRIECTION,u()),this.param.set(c.ATTACK,h()),this.param.set(c.DEATH,h())},n.initStateMachine=function(){this.stateMachine.set(c.IDLE,new f(this)),this.stateMachine.set(c.ATTACK,new p(this)),this.stateMachine.set(c.DEATH,new S(this))},n.run=function(){switch(this.currentState){case this.stateMachine.get(c.IDLE):case this.stateMachine.get(c.DEATH):case this.stateMachine.get(c.ATTACK):this.param.get(c.ATTACK).value?this.currentState=this.stateMachine.get(c.ATTACK):this.param.get(c.IDLE).value?this.currentState=this.stateMachine.get(c.IDLE):this.param.get(c.DEATH).value?this.currentState=this.stateMachine.get(c.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(c.IDLE)}},e}(M))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/TurnRightStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,i,a,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){i=t.DRIECTION_ENUM},function(t){a=t.IdleTurnStateMachie},function(t){s=t.State}],execute:function(){e._RF.push({},"da875Qy+T1On6sBakdOwbbk","TurnRightStateMachine",void 0);var c="texture/player/turnright";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(i.TOP,new s(e,c+"/top")),n.stateMachine.set(i.BOTTOM,new s(e,c+"/bottom")),n.stateMachine.set(i.LEFT,new s(e,c+"/left")),n.stateMachine.set(i.RIGHT,new s(e,c+"/right")),n}return n(e,t),e}(a));e._RF.pop()}}}));

System.register("chunks:///_virtual/EnityManger.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./index3.ts"],(function(t){"use strict";var i,n,e,s,o,r,c,a,d,u,h,l;return{setters:[function(t){i=t.cclegacy,n=t._decorator,e=t.Sprite,s=t.UITransform,o=t.Component},function(t){r=t.randombyLength},function(t){c=t.inheritsLoose,a=t.defineProperty,d=t.assertThisInitialized,u=t.createClass},function(t){h=t.PARAMS_NAME_ENUM,l=t.DIRECTION_ORDER_ENUM}],execute:function(){var f;i._RF.push({},"dbdc5sA0RpK2a6Ttut+rXPH","EnityManger",void 0);var y=n.ccclass,p=(n.property,t("TILE_HEIGHT",55)),_=t("TILE_WIDTH",55);t("ANIMATION_SPEED",1/8),t("EnityManger",y("EnityManger")(f=function(t){function i(){for(var i,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return i=t.call.apply(t,[this].concat(e))||this,a(d(i),"id",r(12)),a(d(i),"x",void 0),a(d(i),"y",void 0),a(d(i),"fsm",void 0),a(d(i),"_direction",void 0),a(d(i),"_state",void 0),a(d(i),"type",void 0),a(d(i),"transfrom",void 0),i}c(i,t);var n=i.prototype;return n.init=function(t){this.node.addComponent(e).sizeMode=e.SizeMode.CUSTOM,this.transfrom=this.getComponent(s),this.transfrom.setContentSize(4*_,4*p),this.x=t.x,this.y=t.y,this.direction=t.direction,this.state=t.state},n.update=function(){this.node.setPosition(this.x*_,-this.y*p)},n.onDestroy=function(){},u(i,[{key:"state",get:function(){return this._state},set:function(t){this._state=t;try{var i;null==this||null===(i=this.fsm)||void 0===i||i.setParams(t,!0)}catch(t){console.log(this)}}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction=t;try{var i;null==this||null===(i=this.fsm)||void 0===i||i.setParams(h.DRIECTION,l[this._direction])}catch(t){console.log(this)}}}]),i}(o))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/level5.ts",["cc","./index3.ts"],(function(e){"use strict";var t,L,s,c,r;return{setters:[function(e){t=e.cclegacy},function(e){L=e.TILE_TYPE_ENUM,s=e.DRIECTION_ENUM,c=e.ENTINY_STATE_ENUM,r=e.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"dd6febwuWVLsrFTUjW7cJyI","level5",void 0);var y=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_RIGHT_BOTTOM},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:21,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT}]],p={x:1,y:3,direction:s.TOP,state:c.IDLE,type:r.PLAYER},E=[{x:5,y:1,direction:s.LEFT,state:c.IDLE,type:r.WOODENSKELETON}],F={x:6,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};e("default",{mapInfo:y,player:p,enemies:E,spikes:[],bursts:[],door:F});t._RF.pop()}}}));

System.register("chunks:///_virtual/level1.ts",["cc","./index3.ts"],(function(L){"use strict";var O,e,t,s,c;return{setters:[function(L){O=L.cclegacy},function(L){e=L.TILE_TYPE_ENUM,t=L.DRIECTION_ENUM,s=L.ENTINY_STATE_ENUM,c=L.ENTITY_TYPE_ENUM}],execute:function(){O._RF.push({},"df6847cJUlCK6xZdZvzGMc6","level1",void 0);var r=[[{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:null,type:null},{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:9,type:e.WALL_ROW},{src:16,type:e.WALL_LEFT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:13,type:e.WALL_LEFT_BOTTOM},{src:18,type:e.CLIFF_LEFT}],[{src:16,type:e.WALL_LEFT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:15,type:e.WALL_RIGHT_TOP},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:21,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:17,type:e.CLIFF_CENTER}],[{src:9,type:e.WALL_ROW},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:16,type:e.WALL_LEFT_TOP},{src:13,type:e.WALL_LEFT_BOTTOM},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:1,type:e.FLOOR},{src:20,type:e.WALL_LEFT_BOTTOM},{src:17,type:e.CLIFF_CENTER}],[{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:15,type:e.WALL_RIGHT_TOP},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:5,type:e.WALL_COLUMN},{src:14,type:e.WALL_RIGHT_BOTTOM},{src:19,type:e.CLIFF_RIGHT}]],p={x:2,y:8,direction:t.TOP,state:s.IDLE,type:c.PLAYER},y=[{x:7,y:6,direction:t.TOP,state:s.IDLE,type:c.WOODENSKELETON}],_={x:7,y:8,direction:t.BOTTOM,state:s.IDLE,type:c.DOOR};L("default",{mapInfo:r,player:p,enemies:y,spikes:[],bursts:[],door:_});O._RF.pop()}}}));

System.register("chunks:///_virtual/DrawManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,i,s,n,a,o,r,h,c,l,u,d;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Graphics,n=t.BlockInputEvents,a=t.UITransform,o=t.Color,r=t.find,h=t.game,c=t.Component},function(t){l=t.inheritsLoose,u=t.defineProperty,d=t.assertThisInitialized}],execute:function(){var f;e._RF.push({},"e1cf3TKSBZOtYo+2w2WsjU9","DrawManager",void 0);var p,v=i.ccclass,m=t("DURATION",500);!function(t){t.IDLE="IDLE",t.FADE_IN="FADE_IN",t.FADE_OUT="FADE_OUT"}(p||(p={}));t("DrawManager",v("DrawManager")(f=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return e=t.call.apply(t,[this].concat(s))||this,u(d(e),"ctx",void 0),u(d(e),"state",p.IDLE),u(d(e),"totalTime",0),u(d(e),"drution",0),u(d(e),"ca",void 0),u(d(e),"fadeResolve",void 0),u(d(e),"block",void 0),e}l(e,t);var i=e.prototype;return i.init=function(){this.ctx=this.addComponent(s),this.ca=this.findCanvas(),this.block=this.addComponent(n);var t=this.getComponent(a);t.setAnchorPoint(.5,.5),t.setContentSize(this.ca.getComponent(a).width,this.ca.getComponent(a).height),this.setAlpa(1)},i.setAlpa=function(t){this.ctx.clear(),this.ca=this.findCanvas(),this.ctx.rect(0,0,this.ca.getComponent(a).width,this.ca.getComponent(a).height),this.ctx.fillColor=new o(0,0,0,255*t),this.ctx.fill(),this.block.enabled=1===t},i.findCanvas=function(){if(null!==this.ca)return r("/Canvas")},i.update=function(){var t=(h.totalTime-this.totalTime)/this.drution;switch(this.state){case p.FADE_IN:t<1?this.setAlpa(t):(this.setAlpa(1),this.state=p.IDLE,this.fadeResolve(null));break;case p.FADE_OUT:t<1?this.setAlpa(1-t):(this.setAlpa(0),this.fadeResolve(null),this.state=p.IDLE)}},i.fadeIn=function(t){var e=this;return void 0===t&&(t=m),this.setAlpa(1),this.drution=t,this.state=p.FADE_IN,this.totalTime=h.totalTime,new Promise((function(t){e.fadeResolve=t}))},i.fadeOut=function(t){var e=this;return void 0===t&&(t=m),this.setAlpa(0),this.drution=t,this.state=p.FADE_OUT,this.totalTime=h.totalTime,new Promise((function(t){e.fadeResolve=t}))},i.mask=function(){var t=this;return this.setAlpa(1),new Promise((function(e){setTimeout(e,t.drution)}))},e}(c))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/TlieMapManager.ts",["cc","./index.ts","./_rollupPluginModLoBabelHelpers.js","./DataManager.ts","./ResourcesManager.ts","./TileManager.ts"],(function(e){"use strict";var n,t,r,a,i,c,o,u,s,l;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.Component},function(e){a=e.creatUINode,i=e.RandomNumer},function(e){c=e.inheritsLoose,o=e.asyncToGenerator},function(e){u=e.default},function(e){s=e.default},function(e){l=e.TlieManager}],execute:function(){var f;n._RF.push({},"e207c2O4mxN4JFIIGBDUq4c","TlieMapManager",void 0);var p=t.ccclass;e("TlieMapManager",p("TlieMapManager")(f=function(e){function n(){return e.apply(this,arguments)||this}return c(n,e),n.prototype.init=function(){var e=o(regeneratorRuntime.mark((function e(){var n,t,r,c,o,f,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.Instance.mapInfo,e.next=3,s.Instance.loaddir("texture/tile/tile/");case 3:t=e.sent,u.Instance.tileInfo=[],r=0;case 6:if(!(r<n.length)){e.next=21;break}c=n[r],u.Instance.tileInfo[r]=[],o=function(e){var n=c[e];if(null===n.src||null===n.type)return"continue";var o=a(),s=n.src;1!==s&&5!==s&&9!==s||r%2!=0||e%2!=0||(s+=i(0,4));var f="tile ("+s+")",d=t.find((function(e){return e.name===f}))||t[0],g=o.addComponent(l),M=n.type;g.init(M,d,r,e),u.Instance.tileInfo[r][e]=g,o.setParent(p.node)},f=0;case 11:if(!(f<c.length)){e.next=18;break}if("continue"!==o(f)){e.next=15;break}return e.abrupt("continue",15);case 15:f++,e.next=11;break;case 18:r++,e.next=6;break;case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n}(r))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/level12.ts",["cc","./index3.ts"],(function(e){"use strict";var t,L,s,c,r;return{setters:[function(e){t=e.cclegacy},function(e){L=e.TILE_TYPE_ENUM,s=e.DRIECTION_ENUM,c=e.ENTINY_STATE_ENUM,r=e.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"ed967RPEptCF4H3PEcerKI5","level12",void 0);var y=[[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT},{src:null,type:null},{src:null,type:null},{src:20,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:20,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_ROW},{src:23,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:21,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}]],p={x:3,y:5,direction:s.TOP,state:c.IDLE,type:r.PLAYER},O=[{x:1,y:1,direction:s.BOTTOM,state:c.IDLE,type:r.IRONSKELETON},{x:6,y:2,direction:s.LEFT,state:c.IDLE,type:r.WOODENSKELETON}],E=[{x:4,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:4,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP}],F={x:0,y:1,direction:s.LEFT,state:c.IDLE,type:r.DOOR};e("default",{mapInfo:y,player:p,enemies:O,spikes:[],bursts:E,door:F});t._RF.pop()}}}));

System.register("chunks:///_virtual/level13.ts",["cc","./index3.ts"],(function(e){"use strict";var t,L,s,c,r;return{setters:[function(e){t=e.cclegacy},function(e){L=e.TILE_TYPE_ENUM,s=e.DRIECTION_ENUM,c=e.ENTINY_STATE_ENUM,r=e.ENTITY_TYPE_ENUM}],execute:function(){t._RF.push({},"edac2Msxs5OQ69lv8eKDbIm","level13",void 0);var l=[[{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_LEFT_BOTTOM},{src:18,type:L.CLIFF_LEFT}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:23,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:null,type:null},{src:null,type:null}],[{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:22,type:L.WALL_RIGHT_TOP},{src:14,type:L.WALL_ROW},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],y={x:10,y:1,direction:s.LEFT,state:c.IDLE,type:r.PLAYER},p=[{x:1,y:4,direction:s.RIGHT,state:c.IDLE,type:r.WOODENSKELETON},{x:3,y:2,direction:s.RIGHT,state:c.IDLE,type:r.IRONSKELETON},{x:5,y:1,direction:s.RIGHT,state:c.IDLE,type:r.WOODENSKELETON}],O=[{x:1,y:1,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:5,y:2,state:c.IDLE,type:r.BURST,direction:s.TOP}],n={x:1,y:6,direction:s.BOTTOM,state:c.IDLE,type:r.DOOR};e("default",{mapInfo:l,player:y,enemies:p,spikes:[],bursts:O,door:n});t._RF.pop()}}}));

System.register("chunks:///_virtual/level21.ts",["cc","./index3.ts"],(function(t){"use strict";var e,L,s,c,r;return{setters:[function(t){e=t.cclegacy},function(t){L=t.TILE_TYPE_ENUM,s=t.DRIECTION_ENUM,c=t.ENTINY_STATE_ENUM,r=t.ENTITY_TYPE_ENUM}],execute:function(){e._RF.push({},"ee368Y/fchKs6LoCbJ3dtQS","level21",void 0);var O=[[{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:18,type:L.CLIFF_LEFT}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:13,type:L.WALL_LEFT_BOTTOM},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER},{src:null,type:null},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:16,type:L.WALL_LEFT_TOP},{src:13,type:L.WALL_LEFT_BOTTOM},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:17,type:L.CLIFF_CENTER}],[{src:null,type:null},{src:1,type:L.FLOOR},{src:21,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:21,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT}],[{src:20,type:L.WALL_LEFT_TOP},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:17,type:L.CLIFF_CENTER},{src:null,type:null}],[{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:1,type:L.FLOOR},{src:9,type:L.WALL_ROW},{src:9,type:L.WALL_ROW},{src:1,type:L.FLOOR},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null}],[{src:15,type:L.WALL_RIGHT_TOP},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:5,type:L.WALL_COLUMN},{src:14,type:L.WALL_RIGHT_BOTTOM},{src:19,type:L.CLIFF_RIGHT},{src:null,type:null},{src:null,type:null},{src:null,type:null},{src:null,type:null}]],y={x:0,y:7,direction:s.TOP,state:c.IDLE,type:r.PLAYER},p=[{x:2,y:6,direction:s.LEFT,state:c.IDLE,type:r.WOODENSKELETON}],R=[{x:2,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:2,y:5,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:3,state:c.IDLE,type:r.BURST,direction:s.TOP},{x:3,y:4,state:c.IDLE,type:r.BURST,direction:s.TOP}],F={x:7,y:6,direction:s.LEFT,state:c.IDLE,type:r.DOOR};t("default",{mapInfo:O,player:y,enemies:p,spikes:[],bursts:R,door:F});e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EventManager.ts","./EnityManger.ts","./PlayerStateMachine.ts","./DataManager.ts","./MusicManager.ts"],(function(t){"use strict";var e,i,r,n,s,a,o,u,T,l,h,v,f,O,d,c;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){r=t.inheritsLoose,n=t.defineProperty,s=t.assertThisInitialized,a=t.asyncToGenerator},function(t){o=t.EVENTMANAGER,u=t.ENTINY_STATE_ENUM,T=t.CONTROLLER_ENMU,l=t.SHAKE_DIRECTION_ENMU,h=t.DRIECTION_ENUM},function(t){v=t.default},function(t){f=t.EnityManger},function(t){O=t.PlayerStateMachine},function(t){d=t.default},function(t){c=t.default}],execute:function(){var L;e._RF.push({},"f53adYigDhI3bbjulOae/Qf","PlayerManager",void 0);var E=i.ccclass;i.property,t("TILE_HEIGHT",55),t("TILE_WIDTH",55),t("ANIMATION_SPEED",1/8),t("PlayerManager",E("PlayerManager")(L=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(s(e),"speeed",.1),n(s(e),"isMoveing",!1),n(s(e),"targetX",void 0),n(s(e),"targetY",void 0),n(s(e),"clip",[]),e}r(e,t);var i=e.prototype;return i.init=function(){var e=a(regeneratorRuntime.mark((function e(i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fsm=this.addComponent(O),e.next=3,this.fsm.init();case 3:t.prototype.init.call(this,i),this.targetX=this.x,this.targetY=this.y,v.Instance.on(o.PLAYER_CONTROLLER,this.inputhandler,this),v.Instance.on(o.ATTACK_PLAYER,this.Dead,this);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.onDestroy=function(){t.prototype.onDestroy.call(this),v.Instance.off(o.PLAYER_CONTROLLER,this.inputhandler),v.Instance.off(o.ATTACK_PLAYER,this.Dead)},i.onAttackShake=function(t){v.Instance.emit(o.SHAKE_SHOW,t)},i.update=function(){t.prototype.update.call(this),this.updateXY()},i.updateXY=function(){this.x<this.targetX?this.x+=this.speeed:this.x>this.targetX&&(this.x-=this.speeed),this.y<this.targetY?this.y+=this.speeed:this.y>this.targetY&&(this.y-=this.speeed),Math.abs(this.x-this.targetX)<=.01&&Math.abs(this.y-this.targetY)<=.01&&!0===this.isMoveing&&(this.x=this.targetX,this.y=this.targetY,this.isMoveing=!1,v.Instance.emit(o.PLAYERMOVE_END))},i.inputhandler=function(t,e){if(this.clip=e,this.state!==u.AIRDEATH&&this.state!==u.DEATH&&this.state!==u.ATTACK&&!this.isMoveing){var i=this.willAttack(t);if(i)return v.Instance.emit(o.RECORD_STEP),v.Instance.emit(o.ATTACK_ENEMY,i),v.Instance.emit(o.DOOR_OPEN),v.Instance.emit(o.PLAYERMOVE_END),void c.Instance.sound(e[1]);if(this.willblock(t))return t===T.TOP?v.Instance.emit(o.SHAKE_SHOW,l.TOP):t===T.BOTTOM?v.Instance.emit(o.SHAKE_SHOW,l.BOTTOM):t===T.LEFT?v.Instance.emit(o.SHAKE_SHOW,l.LEFT):t===T.RIGHT?v.Instance.emit(o.SHAKE_SHOW,l.RIGHT):t===T.TURN_LEFT&&this.direction===h.TOP?v.Instance.emit(o.SHAKE_SHOW,l.LEFT):t===T.TURN_LEFT&&this.direction===h.LEFT?v.Instance.emit(o.SHAKE_SHOW,l.BOTTOM):t===T.TURN_LEFT&&this.direction===h.BOTTOM?v.Instance.emit(o.SHAKE_SHOW,l.RIGHT):t===T.TURN_LEFT&&this.direction===h.RIGHT?v.Instance.emit(o.SHAKE_SHOW,l.TOP):t===T.TURN_RIGHT&&this.direction===h.TOP?v.Instance.emit(o.SHAKE_SHOW,l.RIGHT):t===T.TURN_RIGHT&&this.direction===h.LEFT?v.Instance.emit(o.SHAKE_SHOW,l.TOP):t===T.TURN_RIGHT&&this.direction===h.BOTTOM?v.Instance.emit(o.SHAKE_SHOW,l.LEFT):t===T.TURN_RIGHT&&this.direction===h.RIGHT&&v.Instance.emit(o.SHAKE_SHOW,l.BOTTOM),void c.Instance.sound(e[2]);this.move(t),c.Instance.sound(e[0])}},i.Dead=function(t,e){this.state=t,c.Instance.sound(this.clip[3])},i.move=function(t){switch(v.Instance.emit(o.RECORD_STEP),t){case T.TOP:this.targetY-=1,this.isMoveing=!0,this.showsmoke(h.TOP);break;case T.BOTTOM:this.targetY+=1,this.isMoveing=!0,this.showsmoke(h.BOTTOM);break;case T.LEFT:this.targetX-=1,this.isMoveing=!0,this.showsmoke(h.LEFT);break;case T.RIGHT:this.targetX+=1,this.isMoveing=!0,this.showsmoke(h.RIGHT);break;case T.TURN_LEFT:this.state=u.TURN_LEFT,this.direction===h.TOP?this.direction=h.LEFT:this.direction===h.LEFT?this.direction=h.BOTTOM:this.direction===h.BOTTOM?this.direction=h.RIGHT:this.direction===h.RIGHT&&(this.direction=h.TOP),v.Instance.emit(o.PLAYERMOVE_END);break;case T.TURN_RIGHT:this.direction===h.LEFT?this.direction=h.TOP:this.direction===h.RIGHT?this.direction=h.BOTTOM:this.direction===h.BOTTOM?this.direction=h.LEFT:this.direction===h.TOP&&(this.direction=h.RIGHT),this.state=u.TURN_RIGHT,v.Instance.emit(o.PLAYERMOVE_END)}},i.willblock=function(t){var e=this.targetX,i=this.targetY,r=this.direction,n=d.Instance.tileInfo,s=d.Instance,a=s.mapRowCount,o=s.mapColumnCount,l=d.Instance.door||{},v=l.x,f=l.y,O=l.state,c=d.Instance.burst.filter((function(t){return t.state!==u.DEATH})),L=d.Instance.enemes.filter((function(t){return t.state!==u.DEATH}));if(t===T.TOP){var E=i-1;if(r===h.TOP){var R,K;if(E<0)return this.state=u.BLOCKFRONT,!0;var B=i-2,C=null===(R=n[e])||void 0===R?void 0:R[E],H=null===(K=n[e])||void 0===K?void 0:K[B];if((E===f&&v===e||v===e&&B===f)&&O!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var I=0;I<L.length;I++){var A=L[I],m=A.x,F=A.y;if(E===F&&m===e||m===e&&B===F)return this.state=u.BLOCKFRONT,!0}if(c.some((function(t){return t.x===e&&t.y===E}))&&(!H||H.turnable))return!1;if(!C||!C.moveable||H&&!H.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.BOTTOM){var b,y;if(E<0)return this.state=u.BLOCKBACK,!0;var g=i,N=null===(b=n[e])||void 0===b?void 0:b[E],M=null===(y=n[e])||void 0===y?void 0:y[g];if((E===f&&v===e||v===e&&g===f)&&O!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var _=0;_<L.length;_++){var x=L[_],G=x.x,D=x.y;if(E===D&&G===e)return this.state=u.BLOCKBACK,!0}if(c.some((function(t){return t.x===e&&t.y===E}))&&(!M||M.turnable))return!1;if(!N||!N.moveable||M&&!M.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.LEFT){var p,P;if(E<0)return this.state=u.BLOCKLEFT,!0;var S=e-1,U=i-1,Y=null===(p=n[e])||void 0===p?void 0:p[E],k=null===(P=n[S])||void 0===P?void 0:P[U];if((E===f&&v===e||v===S&&U===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var W=0;W<L.length;W++){var w=L[W],X=w.x,V=w.y;if(E===V&&X===e||U===V&&X===S)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===e&&t.y===E}))&&(!k||k.turnable))return!1;if(!Y||!Y.moveable||k&&!k.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.RIGHT){var j,z;if(E<0)return this.state=u.BLOCKRIGHT,!0;var Q=e+1,q=i-1,J=null===(j=n[e])||void 0===j?void 0:j[E],Z=null===(z=n[Q])||void 0===z?void 0:z[q];if((E===f&&v===e||v===Q&&q===f)&&O!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var $=0;$<L.length;$++){var tt=L[$],et=tt.x,it=tt.y;if(E===it&&et===e||q===it&&et===Q)return this.state=u.BLOCKRIGHT,!0}if(c.some((function(t){return t.x===e&&t.y===E}))&&(!Z||Z.turnable))return!1;if(!J||!J.moveable||Z&&!Z.turnable)return this.state=u.BLOCKLEFT,!0}}else if(t===T.BOTTOM){var rt=i+1;if(r===h.TOP){var nt,st;if(rt>o-1)return this.state=u.BLOCKBACK,!0;var at=i,ot=null===(nt=n[e])||void 0===nt?void 0:nt[rt],ut=null===(st=n[e])||void 0===st?void 0:st[at];if((rt===f&&v===e||v===e&&at===f)&&O!==u.DEATH)return this.state=u.BLOCKBACK,!0;for(var Tt=0;Tt<L.length;Tt++){var lt=L[Tt],ht=lt.x,vt=lt.y;if(rt===vt&&ht===e)return this.state=u.BLOCKBACK,!0}if(c.some((function(t){return t.x===e&&t.y===rt}))&&(!ut||ut.turnable))return!1;if(!ot||!ot.moveable||ut&&!ut.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.BOTTOM){var ft,Ot;if(rt>o-1)return this.state=u.BLOCKFRONT,!0;var dt=i+2,ct=null===(ft=n[e])||void 0===ft?void 0:ft[rt],Lt=null===(Ot=n[e])||void 0===Ot?void 0:Ot[dt];if((rt===f&&v===e||v===e&&dt===f)&&O!==u.DEATH)return this.state=u.BLOCKFRONT,!0;for(var Et=0;Et<L.length;Et++){var Rt=L[Et],Kt=Rt.x,Bt=Rt.y;if(rt===Bt&&Kt===e||Kt===e&&dt===Bt)return this.state=u.BLOCKFRONT,!0}if(c.some((function(t){return t.x===e&&t.y===rt}))&&(!Lt||Lt.turnable))return!1;if(!ct||!ct.moveable||Lt&&!Lt.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.LEFT){var Ct,Ht;if(rt>o-1)return this.state=u.BLOCKLEFT,!0;var It=e-1,At=i+1,mt=null===(Ct=n[e])||void 0===Ct?void 0:Ct[rt],Ft=null===(Ht=n[It])||void 0===Ht?void 0:Ht[At];if((rt===f&&v===e||v===It&&At===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var bt=0;bt<L.length;bt++){var yt=L[bt],gt=yt.x,Nt=yt.y;if(rt===Nt&&gt===e||gt===It&&Nt===At)return this.state=u.BLOCKLEFT,!0}if(!mt||!mt.moveable||Ft&&!Ft.turnable)return this.state=u.BLOCKLEFT,!0;if(c.some((function(t){return t.x===e&&t.y===rt}))&&(!Ft||Ft.turnable))return!1}else if(r===h.RIGHT){var Mt,_t;if(rt>o-1)return this.state=u.BLOCKRIGHT,!0;var xt=e+1,Gt=i+1,Dt=null===(Mt=n[e])||void 0===Mt?void 0:Mt[rt],pt=null===(_t=n[xt])||void 0===_t?void 0:_t[Gt];if((rt===f&&v===e||v===xt&&Gt===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Pt=0;Pt<L.length;Pt++){var St=L[Pt],Ut=St.x,Yt=St.y;if(rt===Yt&&Ut===e||Ut===xt&&Yt===Gt)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===e&&t.y===rt}))&&(!pt||pt.turnable))return!1;if(!Dt||!Dt.moveable||pt&&!pt.turnable)return this.state=u.BLOCKRIGHT,!0}}else if(t===T.LEFT){var kt=e-1;if(r===h.TOP){var Wt,wt;if(kt<0)return this.state=u.BLOCKLEFT,!0;var Xt=e-1,Vt=i-1,jt=null===(Wt=n[kt])||void 0===Wt?void 0:Wt[i],zt=null===(wt=n[Xt])||void 0===wt?void 0:wt[Vt];if((i===f&&v===kt||v===Xt&&Vt===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Qt=0;Qt<L.length;Qt++){var qt=L[Qt],Jt=qt.x,Zt=qt.y;if(i===Zt&&Jt===kt||Jt===Xt&&Zt===Vt)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===kt&&t.y===i}))&&(!zt||zt.turnable))return!1;if(!jt||!jt.moveable||zt&&!zt.turnable)return this.state=u.BLOCKLEFT,!0}else if(r===h.BOTTOM){var $t,te;if(kt<0)return this.state=u.BLOCKRIGHT,!0;var ee=e-1,ie=i+1,re=null===($t=n[kt])||void 0===$t?void 0:$t[i],ne=null===(te=n[ee])||void 0===te?void 0:te[ie];if((i===f&&v===kt||v===ee&&ie===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var se=0;se<L.length;se++){var ae=L[se],oe=ae.x,ue=ae.y;if(i===ue&&oe===kt||oe===ee&&ue===ie)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===kt&&t.y===i}))&&(!ne||ne.turnable))return!1;if(!re||!re.moveable||ne&&!ne.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.LEFT){var Te,le;if(kt<0)return this.state=u.BLOCKFRONT,!0;var he=e-2,ve=null===(Te=n[kt])||void 0===Te?void 0:Te[i],fe=null===(le=n[he])||void 0===le?void 0:le[i];if((i===f&&v===kt||v===he&&i===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var Oe=0;Oe<L.length;Oe++){var de=L[Oe],ce=de.x,Le=de.y;if(i===Le&&ce===kt||ce===he&&Le===i)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===kt&&t.y===i}))&&(!fe||fe.turnable))return!1;if(!ve||!ve.moveable||fe&&!fe.turnable)return this.state=u.BLOCKFRONT,!0}else if(r===h.RIGHT){var Ee,Re;if(kt<0)return this.state=u.BLOCKBACK,!0;var Ke=e,Be=null===(Ee=n[kt])||void 0===Ee?void 0:Ee[i],Ce=null===(Re=n[Ke])||void 0===Re?void 0:Re[i];if((i===f&&v===kt||v===Ke&&i===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var He=0;He<L.length;He++){var Ie=L[He],Ae=Ie.x,me=Ie.y;if(i===me&&Ae===kt||Ae===Ke&&me===i)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===kt&&t.y===i}))&&(!Ce||Ce.turnable))return!1;if(!Be||!Be.moveable||Ce&&!Ce.turnable)return this.state=u.BLOCKBACK,!0}}else if(t===T.RIGHT){var Fe=e+1;if(r===h.TOP){var be,ye;if(Fe>a-1)return this.state=u.BLOCKRIGHT,!0;var ge=e+1,Ne=i-1,Me=null===(be=n[Fe])||void 0===be?void 0:be[i],_e=null===(ye=n[ge])||void 0===ye?void 0:ye[Ne];if((i===f&&v===Fe||v===ge&&Ne===f)&&O!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var xe=0;xe<L.length;xe++){var Ge=L[xe],De=Ge.x,pe=Ge.y;if(i===pe&&De===Fe||De===ge&&pe===Ne)return this.state=u.BLOCKRIGHT,!0}if(c.some((function(t){return t.x===Fe&&t.y===i}))&&(!_e||_e.turnable))return!1;if(!Me||!Me.moveable||_e&&!_e.turnable)return this.state=u.BLOCKRIGHT,!0}else if(r===h.BOTTOM){var Pe,Se;if(Fe>a-1)return this.state=u.BLOCKLEFT,!0;var Ue=e+1,Ye=i+1,ke=null===(Pe=n[Fe])||void 0===Pe?void 0:Pe[i],We=null===(Se=n[Ue])||void 0===Se?void 0:Se[Ye];if((i===f&&v===Fe||v===Ue&&Ye===f)&&O!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var we=0;we<L.length;we++){var Xe=L[we],Ve=Xe.x,je=Xe.y;if(i===je&&Ve===Fe||Ve===Ue&&je===Ye)return this.state=u.BLOCKRIGHT,!0}if(c.some((function(t){return t.x===Fe&&t.y===i}))&&(!We||We.turnable))return!1;if(!ke||!ke.moveable||We&&!We.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.LEFT){var ze,Qe;if(Fe>a-1)return this.state=u.BLOCKBACK,!0;var qe=e,Je=null===(ze=n[Fe])||void 0===ze?void 0:ze[i],Ze=null===(Qe=n[qe])||void 0===Qe?void 0:Qe[i];if((i===f&&v===Fe||v===qe&&i===f)&&O!==u.DEATH)return this.state=u.BLOCKLEFT,!0;for(var $e=0;$e<L.length;$e++){var ti=L[$e],ei=ti.x,ii=ti.y;if(i===ii&&ei===Fe||ei===qe&&ii===i)return this.state=u.BLOCKLEFT,!0}if(c.some((function(t){return t.x===Fe&&t.y===i}))&&(!Ze||Ze.turnable))return!1;if(!Je||!Je.moveable||Ze&&!Ze.turnable)return this.state=u.BLOCKBACK,!0}else if(r===h.RIGHT){var ri,ni;if(Fe>a-1)return this.state=u.BLOCKFRONT,!0;var si=e+2,ai=null===(ri=n[Fe])||void 0===ri?void 0:ri[i],oi=null===(ni=n[si])||void 0===ni?void 0:ni[i];if((i===f&&v===Fe||v===si&&i===f)&&O!==u.DEATH)return this.state=u.BLOCKRIGHT,!0;for(var ui=0;ui<L.length;ui++){var Ti=L[ui],li=Ti.x,hi=Ti.y;if(i===hi&&li===Fe||li===si&&hi===i)return this.state=u.BLOCKRIGHT,!0}if(c.some((function(t){return t.x===Fe&&t.y===i}))&&(!oi||oi.turnable))return!1;if(!ai||!ai.moveable||oi&&!oi.turnable)return this.state=u.BLOCKFRONT,!0}}else if(t===T.TURN_LEFT){var vi,fi,Oi,di,ci,Li,Ei,Ri,Ki,Bi,Ci;if(r===h.TOP?(Bi=e-1,Ci=i-1):r===h.BOTTOM?(Bi=e+1,Ci=i+1):r===h.LEFT?(Bi=e-1,Ci=i+1):r===h.RIGHT&&(Bi=e+1,Ci=i-1),(null===(vi=n[e])||void 0===vi?void 0:vi[Ci])&&!(null===(fi=n[e])||void 0===fi||null===(Oi=fi[Ci])||void 0===Oi?void 0:Oi.turnable)||(null===(di=n[Bi])||void 0===di?void 0:di[i])&&!(null===(ci=n[Bi])||void 0===ci||null===(Li=ci[i])||void 0===Li?void 0:Li.turnable)||(null===(Ei=n[Bi])||void 0===Ei?void 0:Ei[Ci])&&!(null===(Ri=n[Bi])||void 0===Ri||null===(Ki=Ri[Ci])||void 0===Ki?void 0:Ki.turnable))return this.state=u.BLOCKTURNLEFT,!0;if(v===e&&f===Ci||v===Bi&&f===i||v===Bi&&Ci===f&&O!==u.DEATH)return this.state=u.BLOCKTURNLEFT,!0;for(var Hi=0;Hi<L.length;Hi++){var Ii=L[Hi],Ai=Ii.x,mi=Ii.y;if(e===Ai&&mi===Ci)return this.state=u.BLOCKTURNLEFT,!0;if(Bi===Ai&&mi===i)return this.state=u.BLOCKTURNLEFT,!0;if(Bi===Ai&&mi===Ci)return this.state=u.BLOCKTURNLEFT,!0}}else if(t===T.TURN_RIGHT){var Fi,bi,yi,gi,Ni,Mi,_i,xi,Gi,Di,pi;if(r===h.TOP?(Di=e+1,pi=i-1):r===h.BOTTOM?(Di=e-1,pi=i+1):r===h.LEFT?(Di=e-1,pi=i-1):r===h.RIGHT&&(Di=e+1,pi=i+1),v===e&&f===pi||v===Di&&f===i||v===Di&&pi===f&&O!==u.DEATH)return this.state=u.BLOCKTURNRIGHT,!0;for(var Pi=0;Pi<L.length;Pi++){var Si=L[Pi],Ui=Si.x,Yi=Si.y;if(e===Ui&&Yi===pi)return this.state=u.BLOCKTURNRIGHT,!0;if(Di===Ui&&Yi===i)return this.state=u.BLOCKTURNRIGHT,!0;if(Di===Ui&&Yi===pi)return this.state=u.BLOCKTURNRIGHT,!0}if((null===(Fi=n[e])||void 0===Fi?void 0:Fi[pi])&&!(null===(bi=n[e])||void 0===bi||null===(yi=bi[pi])||void 0===yi?void 0:yi.turnable)||(null===(gi=n[Di])||void 0===gi?void 0:gi[i])&&!(null===(Ni=n[Di])||void 0===Ni||null===(Mi=Ni[i])||void 0===Mi?void 0:Mi.turnable)||(null===(_i=n[Di])||void 0===_i?void 0:_i[pi])&&!(null===(xi=n[Di])||void 0===xi||null===(Gi=xi[pi])||void 0===Gi?void 0:Gi.turnable))return this.state=u.BLOCKTURNRIGHT,!0}},i.showsmoke=function(t){v.Instance.emit(o.SMOKE_SHOW,t,this.x,this.y)},i.willAttack=function(t){for(var e=d.Instance.enemes.filter((function(t){return t.state!==u.DEATH})),i=0;i<e.length;i++){var r=e[i],n=r.x,s=r.y,a=r.id;if(t===T.TOP&&this.direction===h.TOP&&this.x===n&&this.targetY-2===s)return this.state=u.ATTACK,a;if(t===T.BOTTOM&&this.direction===h.BOTTOM&&this.x===n&&this.targetY+2===s)return this.state=u.ATTACK,a;if(t===T.LEFT&&this.direction===h.LEFT&&this.x-2===n&&this.targetY===s)return this.state=u.ATTACK,a;if(t===T.RIGHT&&this.direction===h.RIGHT&&this.x+2===n&&this.targetY===s)return this.state=u.ATTACK,a;this.state=u.IDLE}return""},e}(f))||L);e._RF.pop()}}}));

System.register("chunks:///_virtual/StartManager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./FaderManager.ts"],(function(e){"use strict";var n,t,r,a,o,c,s,u,i;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.director,a=e.Node,o=e.Component},function(e){c=e.inheritsLoose,s=e.asyncToGenerator},function(e){u=e.SCENE_ENUM},function(e){i=e.default}],execute:function(){var f;n._RF.push({},"f5b8bH3Y5tCSZVWFFOCRd3V","StartManager",void 0);var p=t.ccclass;t.property,e("StartManager",p("StartManager")(f=function(e){function n(){return e.apply(this,arguments)||this}c(n,e);var t=n.prototype;return t.onLoad=function(){},t.start=function(){r.preloadScene(u.scene),i.Instance.fadeOut(1e3),this.node.once(a.EventType.TOUCH_END,this.handler,this)},t.handler=function(){var e=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Instance.fadeIn(300);case 2:r.loadScene(u.scene);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n}(o))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/AttackDeathSubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(t){"use strict";var e,n,a,i,c;return{setters:[function(t){e=t.cclegacy},function(t){n=t.inheritsLoose},function(t){a=t.DRIECTION_ENUM},function(t){i=t.IdleTurnStateMachie},function(t){c=t.State}],execute:function(){e._RF.push({},"f79f1TAtitDuJM6SJhplKEY","AttackDeathSubStateMachine",void 0);var s="texture/player/death";t("default",function(t){function e(e){var n;return(n=t.call(this,e)||this).stateMachine.set(a.TOP,new c(e,s+"/top")),n.stateMachine.set(a.BOTTOM,new c(e,s+"/bottom")),n.stateMachine.set(a.LEFT,new c(e,s+"/left")),n.stateMachine.set(a.RIGHT,new c(e,s+"/right")),n}return n(e,t),e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/SubStateMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(t){"use strict";var e,n,r,c;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){r=t.createClass,c=t.defineProperty}],execute:function(){var u;e._RF.push({},"fb7335ufP5AeqfdFfoS+CZ7","SubStateMachine",void 0);var a=n.ccclass;n.property,t("default",a("SubStateMachine")(u=function(){function t(t){c(this,"_currentState",null),c(this,"stateMachine",new Map),this.fsm=t}return r(t,[{key:"currentState",get:function(){return this._currentState},set:function(t){t&&(this._currentState=t,this._currentState.run())}}]),t}())||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/IronskeletonManagerSubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./EnityManger.ts","./StateMachine.ts","./IronskeletonDeathsubMachine.ts","./IronskeletonIdlesubMachine.ts"],(function(t){"use strict";var e,n,i,a,s,r,o,c,u,h,M,p,m;return{setters:[function(t){e=t.cclegacy,n=t._decorator,i=t.Animation},function(t){a=t.inheritsLoose,s=t.asyncToGenerator},function(t){r=t.ENTINY_STATE_ENUM,o=t.PARAMS_NAME_ENUM},function(t){c=t.EnityManger},function(t){u=t.GetParamsTrigger,h=t.GetParamsNUmber,M=t.StateMachine},function(t){p=t.default},function(t){m=t.default}],execute:function(){var f;e._RF.push({},"fc102FZ2i9OmbpdMg4xGKmT","IronskeletonManagerSubMachine",void 0);var l=n.ccclass;n.property,t("IronskeletonManagerSubMachine",l("IronskeletonManagerSubMachine")(f=function(t){function e(){return t.apply(this,arguments)||this}a(e,t);var n=e.prototype;return n.init=function(){var t=s(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animationComponent=this.node.addComponent(i),this.initParams(),this.initStateMachine(),this.initEventMachine(),t.next=6,Promise.all(this.waitingList);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.initEventMachine=function(){var t=this;this.animationComponent.on(i.EventType.FINISHED,(function(){var e=t.animationComponent.defaultClip.name;["attack"].some((function(t){return e.includes(t)}))&&(t.node.getComponent(c).state=r.IDLE)}))},n.initParams=function(){this.param.set(o.IDLE,u()),this.param.set(o.DRIECTION,h()),this.param.set(o.DEATH,u())},n.initStateMachine=function(){this.stateMachine.set(o.IDLE,new m(this)),this.stateMachine.set(o.DEATH,new p(this))},n.run=function(){switch(this.currentState){case this.stateMachine.get(o.DEATH):case this.stateMachine.get(o.IDLE):this.param.get(o.IDLE).value?this.currentState=this.stateMachine.get(o.IDLE):this.param.get(o.DEATH).value?this.currentState=this.stateMachine.get(o.DEATH):this.currentState=this.currentState;break;default:this.currentState=this.stateMachine.get(o.IDLE)}},e}(M))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/Singleton.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(n){"use strict";var t,e;return{setters:[function(n){t=n.cclegacy},function(n){e=n.defineProperty}],execute:function(){t._RF.push({},"fcda2hkT05Ojppcj3XyoX+x","Singleton",void 0);var i=n("default",function(){function n(){}return n.GetInstance=function(){return null===this._instance&&(this._instance=new this),this._instance},n}());e(i,"_instance",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/IronskeletonIdlesubMachine.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./index3.ts","./IdleTurnStateMachie.ts","./State.ts"],(function(e){"use strict";var t,n,s,i,c;return{setters:[function(e){t=e.cclegacy},function(e){n=e.inheritsLoose},function(e){s=e.DRIECTION_ENUM},function(e){i=e.IdleTurnStateMachie},function(e){c=e.State}],execute:function(){t._RF.push({},"ff8fcIM645Dn69uhQsJYypQ","IronskeletonIdlesubMachine",void 0);var u="texture/ironskeleton/idle";e("default",function(e){function t(t){var n;return(n=e.call(this,t)||this).stateMachine.set(s.TOP,new c(t,u+"/top")),n.stateMachine.set(s.BOTTOM,new c(t,u+"/bottom")),n.stateMachine.set(s.LEFT,new c(t,u+"/left")),n.stateMachine.set(s.RIGHT,new c(t,u+"/right")),n}return n(t,e),t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./index.ts","./index3.ts","./Singleton.ts","./EventManager.ts","./EnityManger.ts","./StateMachine.ts","./SubStateMachine.ts","./IdleTurnStateMachie.ts","./AirDeathSubStateMachine.ts","./AttackDeathSubStateMachine.ts","./AttackSubStateMachine.ts","./BlockblackStateMachine.ts","./BlockfrontStateMachine.ts","./BlockturnleftStateMachine.ts","./BlockturnrightStateMachine.ts","./IdleLeftStateMachine.ts","./TurnRightStateMachine.ts","./PlayerStateMachine.ts","./DataManager.ts","./AudioManager.ts","./MusicManager.ts","./PlayerManager.ts","./ResourcesManager.ts","./State.ts","./TurnLeftStateMachine.ts","./SpikesSubMachine.ts","./SpikesFourSubMachine.ts","./SpikesOneSubMachine.ts","./SpikesThreeSubMachine.ts","./SpikesTwoSubMachine.ts","./SpikesMachine.ts","./SpikesManager.ts","./SmokeIdleStateMachines.ts","./SmokeDeathStateMachines.ts","./SmokeMachine.ts","./EnemyManager.ts","./AttackSubStateMachines.ts","./DeathSubStateMachines.ts","./IdleSubStateMachines.ts","./WoodenSkeletonSubMachine.ts","./WoodenSkeletonManager.ts","./level14.ts","./TileManager.ts","./level10.ts","./DoorIdleSubStateMachines.ts","./SmokeManager.ts","./UIController.ts","./DoorDeathSubStateMachines.ts","./level3.ts","./level17.ts","./level1.ts","./level2.ts","./level4.ts","./level5.ts","./level6.ts","./level7.ts","./level8.ts","./level9.ts","./level11.ts","./level12.ts","./level13.ts","./level15.ts","./level16.ts","./level18.ts","./level19.ts","./level20.ts","./level21.ts","./index2.ts","./ShakeManager.ts","./DoorSubMachine.ts","./DoorManager.ts","./IronskeletonDeathsubMachine.ts","./IronskeletonIdlesubMachine.ts","./IronskeletonManagerSubMachine.ts","./IronskeletonManager.ts","./BurstMachine.ts","./BurstManager.ts","./LoadingManager.ts","./TlieMapManager.ts","./DrawManager.ts","./FaderManager.ts","./BattleManager.ts","./MenuManager.ts","./StartManager.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});